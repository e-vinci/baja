<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/baja/styles.48682ce610aba6cf8b86.css" data-identity="gatsby-global-css">*{box-sizing:border-box;margin:0;padding:0}.body,.section{color:#2e2e28;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.section{display:flex;flex-flow:row wrap;min-height:10px;width:100%}.section__content{box-sizing:border-box;flex:1 1 100%;flex-wrap:wrap;padding-left:1rem;padding-right:1rem;padding-top:1rem}.section__content--no-auto-margin{padding-left:0}@media only screen and (min-width:992px){.section__content{flex-basis:50%}}.section__header{align-self:flex-start;flex:1 1 100%;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;min-height:10px;padding-left:1rem;padding-right:1rem;text-align:center}.section__header--left{padding-left:1rem;text-align:left}.section__footer{align-self:flex-end;flex:1 1 100%;justify-content:center;min-height:5vh;padding-bottom:1rem;padding-left:1rem;padding-right:1rem;text-align:center}.section__background{background-size:cover;display:flex;flex-flow:row wrap;min-height:10px;width:100%}.section a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.section a:focus,.section a:hover{color:#656558}.header--overlay{left:0;position:absolute;top:0;width:100%;z-index:10}main{background-color:#fffff5;color:#2e2e28;flex-grow:1}.footer,main{font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.footer{background-color:#2e2e28;color:#fff}.footer__icons li:last-of-type{margin-right:0}.footer__background{align-items:center;display:flex;justify-content:space-between;min-height:8vh;padding:1rem}.footer__logo{height:100%}.footer__logo__text{color:#fff;display:inline-block;font-family:MeriendaOne,sans-serif;font-size:1.7rem;font-weight:300}.footer__logo__image{background-image:url(data:image/png;base64,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);background-position:0,100%;min-height:3rem;min-width:30vw}.footer__logo__image,.footer__logo__image2{background-repeat:no-repeat;background-size:contain;display:inline-block;margin-left:1rem;vertical-align:middle}.footer__logo__image2{background-position:50%;min-height:2rem;min-width:10vw}.master{display:flex;flex-direction:column;min-height:100vh;position:relative}.page{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}.page--auto-margin{padding:1rem}.page--auto-margin ol,.page--auto-margin ul{padding-left:1.3rem;padding-right:1.3rem}.page a{color:#2e2e28;cursor:pointer;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.page a:focus,.page a:hover{color:#656558}.page table{border-collapse:collapse;margin-top:.5rem}.page table td,.page table th{border:thin solid gray;padding:.2rem;text-align:left;vertical-align:top}.grid{position:relative}.grid__background-image-wrapper__image{padding:0}.grid__content{display:block;left:0;position:absolute;top:0}.table{border:0;border-bottom:1px solid #ccc;border-collapse:collapse;border-spacing:2px;border-top:3px solid;color:#000;margin:2rem 0;table-layout:fixed;text-indent:0;width:100%}.table td{border:1px solid #ccc;border-bottom:0;border-left:0;border-right:0;padding:.75rem;vertical-align:top;width:75%}.table th{word-wrap:break-word;border:1px solid #ccc;border-bottom:0;border-left:0;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding:.75rem .75rem .75rem 0;text-align:left;vertical-align:top;width:25%}.background{display:flex;z-index:0}.background__image{display:grid}.background--header{z-index:10}.menu{align-items:center;display:flex;list-style:none;margin:0;width:100%}.menu a{color:#fffff5;font-size:1.3rem}.menu a:hover{color:#fffd75;transition:color .3s ease-in}.menu li{margin-right:1rem}.card{background-color:#b54ff9;border-radius:.5rem;display:block;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;margin-bottom:.5rem;padding:.5rem;width:100%;word-break:break-word}.card--fill-wrapper{height:100%}.card--dark-summary{background-color:#2e2e28;border-radius:0;color:#fffff5}.card__header{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;padding:.5rem;text-align:center}.card__content{display:grid;grid-template-columns:1fr 2fr;width:100%}@media only screen and (min-width:576px){.card__content{grid-template-columns:150px 2fr}}.card__content--long-titles{grid-template-columns:2fr 1fr}@media only screen and (min-width:576px){.card__content--long-titles{grid-template-columns:2fr 150px}}.card__content--orange{color:orange!important}.card__content__title{color:#fffff5;font-weight:300;padding-bottom:.5rem;padding-right:.5rem}.card__content__description{padding-bottom:.5rem}.card__content__description a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.card__content__description a:focus,.card__content__description a:hover{color:#656558}.card__content__description input{height:1.3rem;vertical-align:middle;width:1.3rem}.card__content__description__subitems{list-style:none}.card__content__description__subitems__item{border:.5px solid #fffff5;border-radius:.5rem;margin-bottom:.5rem;padding:.5rem}.card__content__description__subitems__item:last-child{margin-bottom:0}.navbar{align-items:center;background-color:#a01ef7;display:flex;flex-basis:100%;flex-wrap:wrap;font-family:MeriendaOne,sans-serif;font-size:large;font-weight:300;justify-content:space-between;margin:0;padding:1rem;position:relative;width:100%;z-index:100}@media only screen and (min-width:992px){.navbar{flex-wrap:nowrap;justify-content:flex-start}}.navbar__toggler{background-color:transparent;border:1px solid #fffff5;border-radius:.25rem;cursor:pointer;display:inline-block;font-size:1.25rem;line-height:1;padding:.25rem .75rem;transition:box-shadow .15s ease-in-out}@media only screen and (min-width:992px){.navbar__toggler{display:none}}.navbar__toggler__icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='hsl(59, 100%, 98%)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")!important;background-position:50%;background-repeat:no-repeat;display:inline-block;height:1.5em;vertical-align:middle;width:1.5em}.navbar__brand{color:#fffff5;font-size:1.7rem;margin-right:1rem;padding-bottom:.3125rem;padding-top:.3125rem;text-decoration:none;white-space:nowrap}.navbar__menu{align-items:center;display:none;flex-basis:100%;flex-grow:1}.navbar__menu--collapse{display:flex}@media only screen and (min-width:992px){.navbar__menu{display:flex;flex-basis:auto}}.navbar__menu__list{display:flex;flex-direction:column;list-style:none}@media only screen and (min-width:992px){.navbar__menu__list{flex-direction:row}}.navbar__menu__list__item{display:list-item;padding-bottom:.5rem;padding-top:.5rem;position:relative}@media only screen and (min-width:992px){.navbar__menu__list__item{padding-left:.5rem;padding-right:.5rem}}.navbar__menu__list__item__link{color:#fffff5;cursor:pointer;display:block;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.navbar__menu__list__item__link:focus,.navbar__menu__list__item__link:hover{color:#fffd8f}.navbar__menu__list__item__link--dropdown-toggle:after{border-bottom:0;border-left:.3em solid transparent;border-right:.3em solid transparent;border-top:.3em solid;content:"";display:inline-block;margin-left:.255em;vertical-align:.255em}.navbar__menu__list__item__dropdown-menu{background-clip:padding-box;background-color:#fffff5;border:1px solid #2e2e28;border-radius:.25rem;color:#2e2e28;display:none;left:0;list-style:none;margin-top:.125rem;min-width:10rem;padding:.5rem 0;position:static;text-align:left;top:100%;z-index:1000}@media only screen and (min-width:992px){.navbar__menu__list__item__dropdown-menu{position:absolute}}.navbar__menu__list__item__dropdown-menu--collapsed{display:block}.navbar__menu__list__item__dropdown-menu__item{display:list-item;padding:.5rem;position:relative}.navbar__menu__list__item__dropdown-menu__item:focus,.navbar__menu__list__item__dropdown-menu__item:hover{background-color:#e0e0dc}.navbar__menu__list__item__dropdown-menu__item__link{color:#2e2e28;cursor:pointer;display:block;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.navbar__menu__list__item__dropdown-menu__item__link:focus,.navbar__menu__list__item__dropdown-menu__item__link:hover{color:#656558}@media only screen and (min-width:992px){.navbar{display:flex;flex-basis:auto}}.navbar--transparent-background{background-color:transparent;background-image:none}.navbar--top-of-page{left:0;position:absolute;top:0}.carousel__wrapper{background-color:#a01ef7;background-image:linear-gradient(180deg,#a01ef7 25%,#ca80fb);box-sizing:border-box;height:auto;margin-top:1rem;max-width:100%;width:100%}.carousel__wrapper__background{display:block}.carousel__wrapper__background--transparent{background-color:transparent;background-image:none}.quote{display:flex;height:100%;justify-content:center;max-width:100vw;padding:30px 20px 60px;width:100%}.quote--close-to-others{padding-bottom:1rem;padding-top:0}.quote__content{align-self:flex-start;border-bottom:1px solid;border-top:1px solid;color:#fffff5;padding:30px 0;position:relative}.quote__content--dark-and-wide{color:#2e2e28;padding:30px 0;width:100%}.quote__content h3{color:#fffff5;position:relative}.quote__content h4{color:#2e2e28;margin:0;padding-top:20px;position:relative}.quote__content h4:before{content:"— "}.quote__content:after{bottom:-43px;color:#fffff5;content:"”";font-size:10rem;line-height:0;position:absolute;right:30px}.schedule{color:#2e2e28;display:flex;flex-direction:column;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400;gap:.5rem;width:100%}.schedule__header1,.schedule__header2,.schedule__header3,.schedule__header4{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-size:large;font-weight:300;line-height:1.5rem;text-align:left}.schedule__title{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-size:medium;font-weight:300;line-height:1.5rem}.schedule__title1:not(.schedule__title),.schedule__title2:not(.schedule__title),.schedule__title3:not(.schedule__title),.schedule__title4:not(.schedule__title){display:none}.schedule__session{background-color:#b54ff9;border-radius:.5rem;display:flex;flex-direction:row;flex-wrap:wrap;min-height:5rem;padding:.5rem;width:100%}.schedule__session__title{align-self:flex-start;color:#fffff5;font-weight:700;text-align:center;width:100%}.schedule__session__time{align-self:flex-end;font-weight:700;text-align:center;width:100%}@media only screen and (min-width:576px){.schedule{color:#2e2e28;display:grid;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400;grid-template:"headertitle header1 header2  header3  header4" "scheduletitle1 monday1 wednesday1 thursday1 friday1" "scheduletitle2 monday2 wednesday2 thursday2 friday2" "scheduletitle3 monday3 wednesday3 thursday3 friday3" "scheduletitle4 monday4 wednesday4 thursday4 friday4";grid-template-columns:repeat(5,1fr);width:100%}.schedule__title1{display:block;font-size:large;grid-area:scheduletitle1}.schedule__title2{display:block;font-size:large;grid-area:scheduletitle2}.schedule__title3{display:block;font-size:large;grid-area:scheduletitle3}.schedule__title4{display:block;font-size:large;grid-area:scheduletitle4}.schedule__header1{grid-area:header1;text-align:center}.schedule__header2{grid-area:header2;text-align:center}.schedule__header3{grid-area:header3;text-align:center}.schedule__header4{grid-area:header4;text-align:center}.schedule__monday1{grid-area:monday1}.schedule__monday2{grid-area:monday2}.schedule__monday3{grid-area:monday3}.schedule__monday4{grid-area:monday4}.schedule__wednesday1{grid-area:wednesday1}.schedule__wednesday2{grid-area:wednesday2}.schedule__wednesday3{grid-area:wednesday3}.schedule__wednesday4{grid-area:wednesday4}.schedule__thursday1{grid-area:thursday1}.schedule__thursday2{grid-area:thursday2}.schedule__thursday3{grid-area:thursday3}.schedule__thursday4{grid-area:thursday4}.schedule__friday1{grid-area:friday1}.schedule__friday2{grid-area:friday2}.schedule__friday3{grid-area:friday3}.schedule__friday4{grid-area:friday4}.schedule__title:not(.schedule__title1):not(.schedule__title2):not(.schedule__title3):not(.schedule__title4){display:none}}.list{padding-left:1rem;padding-top:1rem}.index{grid-gap:1rem;display:grid;grid-template-columns:1fr}@media only screen and (min-width:576px){.index{grid-template-columns:1fr 1fr}}@media only screen and (min-width:1200px){.index{grid-template-columns:1fr 1fr 1fr}}.index__search{display:block;grid-column-end:-1;grid-column-start:1;margin-bottom:1rem;margin-top:1rem;padding:.5rem;width:100%}.index__button{background-color:#2e2e28;border:none;border-radius:.25rem;color:#fffff5;cursor:pointer;display:inline-block;margin-top:1rem;padding:.375rem .75rem;text-align:center;vertical-align:middle}.index__button:hover{background-color:#4a4a40}.index__card{background-color:#b54ff9;border-radius:.5rem;display:block;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding:.5rem;width:100%;word-break:break-word}.index__card__header{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;padding:.5rem;text-align:center}.index__card__content{display:grid;grid-template-columns:1fr 2fr;width:100%}.index__card__content__title{color:#fffff5;font-weight:300;padding-bottom:.5rem;padding-right:.5rem}.index__card__content__description{padding-bottom:.5rem}.index__card__content__description a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.index__card__content__description a:focus,.index__card__content__description a:hover{color:#656558}.index__card__content__description input{height:1.3rem;vertical-align:middle;width:1.3rem}.index__card__content__description__subitems{list-style:none}.index__card__content__description__subitems__item{border:.5px solid #fffff5;border-radius:.5rem;margin-bottom:.5rem;padding:.5rem}.index__card__content__description__subitems__item:last-child{margin-bottom:0}.index__card__content__description--is-being-edited{background-color:#fffff5;margin-bottom:.5rem;padding:.3rem}.index__card__content__description--is-inline{display:inline-block}.index__card--is-being-edited{animation:gradient 2s linear infinite;animation-direction:alternate;background:linear-gradient(45deg,#a01ef7,#8e1ef7,#7c1ef7,#6a1ef7,#581ef7,#461ef7);background-size:600% 100%}@keyframes gradient{0%{background-position:0}to{background-position:100%}}.index .fa-plus-circle{margin-right:.5rem}.index .fa-check-circle{color:green;font-size:1.5rem}.index .fa-minus-circle,.index .fa-times-circle{color:red;font-size:1.5rem}.index .fa-comment-dots,.index .fa-edit,.index .fa-eye,.index .fa-save,.index .fa-times,.index .fa-trash-alt,.index .fa-user-plus,.index .fa-user-times{cursor:pointer;margin-bottom:.5rem;margin-right:.5rem}.index .fa-comment-dots:hover,.index .fa-edit:hover,.index .fa-eye:hover,.index .fa-save:hover,.index .fa-times:hover,.index .fa-trash-alt:hover,.index .fa-user-plus:hover,.index .fa-user-times:hover{color:#4a4a40}.index--long-text{grid-column-end:-1;grid-column-start:1}@media only screen and (min-width:576px){.index--long-text .index__card__content{grid-template-columns:200px 1fr!important}}.spinner__overlay{background:rgba(0,0,0,.7);bottom:0;left:0;position:fixed;right:0;top:0;z-index:5}.spinner__animation{color:#a01ef7;left:50%;position:fixed;top:50%;transform:translate(-50%,-50%);z-index:10}.summary{grid-gap:1rem;display:grid;grid-template-columns:1fr;padding-top:1rem}@media only screen and (min-width:576px){.summary{grid-template-columns:1fr 1fr}}.summary__card-wrapper{display:block;width:100%}.summary__card-wrapper:only-child{grid-column-end:-1;grid-column-start:1;margin-left:auto;margin-right:auto;width:100%}@media only screen and (min-width:576px){.summary__card-wrapper:only-child{width:50%}}@media only screen and (min-width:1200px){.summary__card-wrapper:only-child{width:33%}}.summary .fa-comment,.summary .fa-heart{margin-right:.5rem}.summary .fa-heart{color:red}.summary .fa-comment{color:green}.counter{background-color:#2e2e28;display:flex;justify-content:space-evenly;padding-bottom:.5rem;padding-top:.5rem}.counter__symbol{margin-right:.2rem}.counter__symbol--red{color:red}.counter__symbol--orange{color:orange}.counter__symbol--green{color:green}.codeblock{margin-bottom:.5rem;margin-top:.5rem;overflow:auto}.codeblock pre[class*=language-]{float:left;min-width:100%;padding:.5rem}.codeblock__header{border-bottom:thin solid #9acd32;display:flex;justify-content:flex-start;margin-bottom:.5rem;padding-bottom:.3rem;padding-top:.3rem}.codeblock__header__copy-button{background:none;border:none;color:#fff;cursor:pointer;padding-right:1rem}.codeblock__header__language-name{color:#9acd32}.codeblock__body__line{display:block;min-width:100%}.codeblock__body__line--highlighted{background-color:#353b45}.codeblock__body__line__number{display:table-cell;opacity:.5;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:2.5rem}.codeblock__body__line__content{display:table-cell}.scrollable-image{overflow:auto}.scrollable-image__wrapper{display:inline-block;width:100%}@font-face{font-display:swap;font-family:Kavoon;src:url(/baja/static/Kavoon-Regular-942c5ec99a683f33cbd21f88d0c771dc.ttf)}@font-face{font-display:swap;font-family:MeriendaOne;font-size:15vh;src:url(/baja/static/MeriendaOne-Regular-e9c591ea2539ec7dc624851057cb737b.ttf)}@font-face{font-display:swap;font-family:Apercu Pro Regular;src:url("/baja/static/Apercu Pro Regular-c90f8890213c974793f9a1f665d86410.otf")}@font-face{font-display:swap;font-family:Roboto Regular;src:url(/baja/static/Roboto-Regular-a8d6ac03c7b96b7acb6228ff2676139d.ttf)}@font-face{font-display:swap;font-family:Baloo Bhaina\ 2 Bold;src:url(/baja/static/BalooBhaina2-Bold-0c4963b78753a15075509a388f17234e.ttf)}h1{color:#2e2e28;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:xx-large;font-weight:300;line-height:2rem}h2,h3{font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.7rem}.text,h2,h3{color:#2e2e28}.text{font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.text--light{color:#fffff5!important}.text--italic{font-style:italic!important}.text--emphasized{font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem}.text--hand-written{font-family:MeriendaOne,sans-serif;font-size:large;font-weight:300}.ml-0{margin-left:0!important}.ml-1{margin-left:.25rem!important}.ml-2{margin-left:.5rem!important}.ml-3{margin-left:1rem!important}.ml-4{margin-left:1.5rem!important}.ml-5{margin-left:3rem!important}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mr-0{margin-right:0!important}.mr-1{margin-right:.25rem!important}.mr-2{margin-right:.5rem!important}.mr-3{margin-right:1rem!important}.mr-4{margin-right:1.5rem!important}.mr-5{margin-right:3rem!important}.pl-0{padding-left:0!important}.pl-1{padding-left:.25rem!important}.pl-2{padding-left:.5rem!important}.pl-3{padding-left:1rem!important}.pl-4{padding-left:1.5rem!important}.pl-5{padding-left:3rem!important}.pt-0{padding-top:0!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.pr-0{padding-right:0!important}.pr-1{padding-right:.25rem!important}.pr-2{padding-right:.5rem!important}.pr-3{padding-right:1rem!important}.pr-4{padding-right:1.5rem!important}.pr-5{padding-right:3rem!important}.vh-5{height:5vh}.vh-10{height:10vh}.vh-15{height:15vh}.vh-20{height:20vh}.vh-25{height:25vh}.vh-30{height:30vh}.vh-35{height:35vh}.vh-40{height:40vh}.vh-45{height:45vh}.vh-50{height:50vh}.vh-55{height:55vh}.vh-60{height:60vh}.vh-65{height:65vh}.vh-70{height:70vh}.vh-75{height:75vh}.vh-80{height:80vh}.vh-85{height:85vh}.vh-90{height:90vh}.vh-95{height:95vh}.vh-100{height:100vh}.vw-5{flex-basis:5vw;width:5vw}.vw-10{flex-basis:10vw;width:10vw}.vw-15{flex-basis:15vw;width:15vw}.vw-20{flex-basis:20vw;width:20vw}.vw-25{flex-basis:25vw;width:25vw}.vw-30{flex-basis:30vw;width:30vw}.vw-35{flex-basis:35vw;width:35vw}.vw-40{flex-basis:40vw;width:40vw}.vw-45{flex-basis:45vw;width:45vw}.vw-50{flex-basis:50vw;width:50vw}.vw-55{flex-basis:55vw;width:55vw}.vw-60{flex-basis:60vw;width:60vw}.vw-65{flex-basis:65vw;width:65vw}.vw-70{flex-basis:70vw;width:70vw}.vw-75{flex-basis:75vw;width:75vw}.vw-80{flex-basis:80vw;width:80vw}.vw-85{flex-basis:85vw;width:85vw}.vw-90{flex-basis:90vw;width:90vw}.vw-95{flex-basis:95vw;width:95vw}.vw-100{flex-basis:100vw;width:100vw}.w-5{flex-basis:5%;width:5%}.w-10{flex-basis:10%;width:10%}.w-15{flex-basis:15%;width:15%}.w-20{flex-basis:20%;width:20%}.w-25{flex-basis:25%;width:25%}.w-30{flex-basis:30%;width:30%}.w-35{flex-basis:35%;width:35%}.w-40{flex-basis:40%;width:40%}.w-45{flex-basis:45%;width:45%}.w-50{flex-basis:50%;width:50%}.w-55{flex-basis:55%;width:55%}.w-60{flex-basis:60%;width:60%}.w-65{flex-basis:65%;width:65%}.w-70{flex-basis:70%;width:70%}.w-75{flex-basis:75%;width:75%}.w-80{flex-basis:80%;width:80%}.w-85{flex-basis:85%;width:85%}.w-90{flex-basis:90%;width:90%}.w-95{flex-basis:95%;width:95%}.w-100{flex-basis:100%;width:100%}.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;line-height:inherit;position:absolute;text-align:center;width:2em}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s linear infinite;animation:fa-spin 2s linear infinite}.fa-pulse{-webkit-animation:fa-spin 1s steps(8) infinite;animation:fa-spin 1s steps(8) infinite}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}</style><meta name="generator" content="Gatsby 3.14.6"/><title data-react-helmet="true">Module 1 : découverte de JAX-RS</title><meta data-react-helmet="true" name="description" content="Découverte de JAX-RS"/><meta data-react-helmet="true" property="og:url" content="https://e-vinci.github.io/baja/baja/modules/1/"/><meta data-react-helmet="true" property="og:title" content="Module 1 : découverte de JAX-RS"/><meta data-react-helmet="true" property="og:description" content="Découverte de JAX-RS"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/baja/favicon-32x32.png" type="image/png"/><link rel="icon" href="/baja/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="/baja/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#303030"/><link rel="apple-touch-icon" sizes="48x48" href="/baja/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/baja/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/baja/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/baja/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/baja/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/baja/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/baja/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/baja/icons/icon-512x512.png"/><link as="script" rel="preload" href="/baja/webpack-runtime-05b7e4fe05b61938ab31.js"/><link as="script" rel="preload" href="/baja/framework-d6f4909565f689f6944d.js"/><link as="script" rel="preload" href="/baja/cb1608f2-86e288025e19922e7c24.js"/><link as="script" rel="preload" href="/baja/app-10cc16623ccb3adf054e.js"/><link as="script" rel="preload" href="/baja/a9a7754c-e6f8295ec695f49a0595.js"/><link as="script" rel="preload" href="/baja/0816e0feb973c1d40069d6902f99c49c22995b76-d1210302a937f7eac85c.js"/><link as="script" rel="preload" href="/baja/component---src-templates-mdx-pages-js-a770ad5bbe8e99fdedd8.js"/><link as="fetch" rel="preload" href="/baja/page-data/modules/1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/1858702104.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/2153498299.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/3028011774.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/3458129946.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="master"><header class="header "><nav class="navbar "><a class="navbar__brand" href="/baja/">Backend Java</a><button class="navbar__toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar__toggler__icon"></span></button><div class="navbar__menu " id="navbarSupportedContent"><ul class="navbar__menu__list"><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/">Home</a></li><li class="navbar__menu__list__item"><a class="navbar__menu__list__item__link navbar__menu__list__item__link--dropdown-toggle">Contenu du cours</a><ul class="navbar__menu__list__item__dropdown-menu " aria-labelledby="navbarDropdown"><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/intro">Introduction</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/1">Module 1 : découverte de JAX-RS</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/2">Module 2 : JAX-RS &amp; auths</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/3">Module 3 : JAX-RS avancé</a></li></ul></li><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/repositories">Repositories</a></li><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/about">About</a></li></ul></div></nav></header><main class="main"><div class="page page--auto-margin"><h1>Module 1 : découverte de JAX-RS</h1><p>Ce module vous offre une première découverte du framework JAX-RS par le biais d&#x27;un tutoriel. </p><p>Voici les sujets traités :</p><ul><li>a) <a href="/baja/modules/1#sectionA">Rappel de conventions sur les RESTful API</a></li><li>b) <a href="/baja/modules/1#sectionB">Création d’une première application sur base d’un Archetype Maven</a></li><li>c) <a href="/baja/modules/1#sectionC">Première opération de lecture de ressources JSON</a></li><li>d) <a href="/baja/modules/1#sectionD">Gestion des paramètres de requêtes</a></li><li>e) <a href="/baja/modules/1#sectionE">Gestion des réponses</a></li><li>f) <a href="/baja/modules/1#sectionF">Envoi de requêtes à ses APIs</a></li><li>g) <a href="/baja/modules/1#sectionG">Sérialisation de fichiers JSON</a></li><li>h) <a href="/baja/modules/1#sectionH">Gestion des caractères dangereux</a></li><li>i) <a href="/baja/modules/1#sectionI">Exercice 1.1</a></li></ul><br/><h1><a id="sectionA"></a>a) Rappel de conventions sur les RESTful API</h1><p>Un RESTful web service, ou RESTful API, met à disposition des opérations sur des ressources.
Ces opérations seront disponibles via des requêtes http associées à des URLs construites
selon les conventions RESTful.</p><br/><p>Les RESTful APIs sont <strong>stateless</strong> : le serveur n’enregistre aucune information côté serveur
concernant les sessions des clients. </p><p>Cela permet principalement de rendre l’architecture
facilement « scalable ».Chaque requête vers une RESTful API protégée (via JWT)
devra contenir toutes les données pour être authentifié / autorisé.</p><br/><p>Une RESTful API met à disposition des opérations sur des ressources via :</p><ul><li>des URI</li><li>des méthodes HTTPS</li><li>des représentations des ressources compréhensibles tant par les clients que les
serveurs</li></ul><br/><p>Voici un résumé des conventions associées aux applications REST :</p><ul><li>1 collection de données = des ressources (d’un certain type)</li><li>1 élément d’une collection = 1 ressource</li><li>1 adresse unique pour chaque ressource = 1 URL</li><li>Media type = format de donnée représentant une ressource : JSON, XML, HTML, TXT, JPEG,
PNG…</li><li>Le type d’opération sur une ressource est défini via la méthode http de la requête :<ul><li>GET = READ (la ou les ressource(s))</li><li>POST = CREATE </li><li>DELETE = DELETE : )</li><li>PUT = UPDATE</li></ul></li></ul><br/><p>Voici un exemple d’application de ces conventions RESTful dans le cadre d’une RESTful API
permettant de gérer des films :</p><table><thead><tr><th>URI</th><th>Méthode HTTP</th><th>Opération</th></tr></thead><tbody><tr><td><strong>films</strong></td><td>GET</td><td>READ ALL : Lire toutes les ressources de la collection</td></tr><tr><td><strong>films?minimumduration=value</strong></td><td>GET</td><td>READ ALL FILTERED : Lire toutes les ressources de la collection selon le filtre donné</td></tr><tr><td><strong>films/{id}</strong></td><td>GET</td><td>READ ONE : Lire la ressource identifiée</td></tr><tr><td><strong>films</strong></td><td>POST</td><td>CREATE ONE : Créer une ressource basée sur les données de la requête</td></tr><tr><td><strong>films/{id}</strong></td><td>DELETE</td><td>DELETE ONE : Effacer la ressource identifiée</td></tr><tr><td><strong>films/{id}</strong></td><td>PUT</td><td>UPDATE ONE : Replacer l&#x27;entièreté de la ressource par les données de la requête</td></tr></tbody></table><br/>Nous allons maintenant développer une application JAX-RS offrant une API de films.<br/><br/><h1><a id="sectionB"></a>b) Création d’une première application sur base d’un Archetype Maven</h1><p>Un <strong>archetype Maven</strong> est un boilerplate de projet mis à disposition sur un repository.</p><br/><p>Jersey offre différents archetypes Maven.</p><p>Pour plus d&#x27;infos: <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/getting-started.html#new-from-archetype">https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/getting-started.html#new-from-archetype</a> </p><br/><p>A l’aide d’IntelliJ, créez un projet ou un module Maven en utilisant un archetype fournit par Jersey :</p><ul><li>Clic sur “<strong>Create from archetype</strong>” à la création de votre projet</li><li>Sélectionnez dans la liste des archetypes : <strong>org.glassfish.jersey.archetypes :jersey-quickstart-grizzly2</strong></li><li>Ajouter le nom de domaine dans <strong>Artifact Coordinates</strong>, <strong>GroupId</strong>. Par exemple : <strong>be.vinci</strong></li></ul><br/><p>Explorez ce qui est offert au sein de ce module ou projet :</p><ul><li>Lancez la méthode <strong>main</strong> de la classe <strong>Main</strong>.</li><li>Une tout première méthode <strong>getIt</strong> est offerte au sein de la ressource <strong>MyResource</strong>.</li><li>Consommez cette méthode <strong>getIt</strong>  à l’aide d’un client, via un browser, à l’URL <a href="http://localhost:8080/myresource">http://localhost:8080/myresource</a> </li></ul><br/><p>Pour terminer, veuillez mettre à jour les versions de vos dépendances (directement dans <strong>/pom.xml</strong>).:</p><ul><li>Faites passer <strong>Jersey</strong> en version <strong>3.0.3</strong>. </li><li>Faites en sorte de configurer aussi votre projet pour bénéficier de la version LTS de Java, actuellement la version 17.</li></ul><pre><code class="language-markup" metastring="{6-9}">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.5.1&lt;/version&gt;
    &lt;inherited&gt;true&lt;/inherited&gt;
    &lt;configuration&gt;
        &lt;source&gt;17&lt;/source&gt;
        &lt;target&gt;17&lt;/target&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre><br/><h1><a id="sectionC"></a>c) Première opération de lecture de ressources JSON</h1><h2>c.1) Introduction</h2><p>La gestion des ressources est décrite dans le manuel utilisateur de Jersey : <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/jaxrs-resources.html">https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/jaxrs-resources.html</a></p><p>Pour expliquer ces concepts, nous allons développer la fonction permettant de lire tous les films en continuant le projet initialisé à la section précédente.
Nous souhaitons que lorsque nous indiquons <a href="http://localhost:8080/films">http://localhost:8080/films</a> dans le browser, une liste de
films par défaut soit renvoyée au format JSON vers l&#x27;utilisateur.</p><br/><p>Dans la classe <strong>Main</strong> du projet, on retrouve :</p><pre><code class="language-java">final ResourceConfig rc = new ResourceConfig().packages(&quot;be.vinci&quot;);
</code></pre><p>Cette ligne de code permet scanner toutes les ressources JAX-RS
(ainsi que les providers que nous verrons plus tard) présentes dans le package <strong>be.vinci</strong> et de les déployer au sein d’un container http de Grizzly.</p><br/><p>Les classes associées à des ressources (<strong>MyResource</strong> dans ce projet) sont enregistrées
au sein de l’application. Le framework pourra injecter des instances de ces ressources le temps voulu.</p><br/><p>Pour pouvoir utiliser l’injection de dépendances, la librairie de Jersey permettant de le faire a été installée.
Celle-ci se trouve indiquée de la sorte dans <strong>/pom.xml</strong> :</p><pre><code class="language-markup"> &lt;dependency&gt;
            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;
            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;
 &lt;/dependency&gt;
</code></pre><p>Dans la classe <strong>Main</strong>, changez la <strong>BASE_URI</strong> pour pointer vers <a href="http://localhost:8080/">http://localhost:8080/</a>.</p><pre><code class="language-java">public static final String BASE_URI = &quot;http://localhost:8080/&quot;;
</code></pre><br/><h2>c.2) Root resources</h2><p>Des ressources d’un même type sont gérées au sein d’une « Root Resource Class ».
Une Root Resource est un <strong>POJO</strong> annotée de <strong>@Path(&quot;URI_PATH&quot;)</strong>.</p><p>Le code précédent indique que la « Root Resource » <strong>MyResource</strong> sera mis à disposition via <strong>/myresource</strong> .</p><pre><code class="language-java" metastring="{1}">@Path(&quot;myresource&quot;)
public class MyResource {
</code></pre><br/>NB : Une Root Resource est l’équivalent d’un router sous Express (framework Node.js).<br/><br/><p>On souhaite que toutes les opérations sur les ressources de type <strong>Film</strong> soient accessibles
via l&#x27;URI &quot;<strong>/films</strong>&quot;.
Pour ce faire :</p><ul><li>Renommez la classe <strong>MyResource</strong> en <strong>FilmResource</strong> et sa méthode <strong>getIt</strong> en <strong>getAll</strong>.</li><li>Changez le <strong>Path</strong> annotant la classe <strong>FilmResource</strong> vers : </li></ul><pre><code class="language-java" metastring="{1}">@Path(&quot;films&quot;)
public class FilmResource {
</code></pre><br/><p>Ajoutez la classe <strong>Film</strong> au sein de votre projet :</p><pre><code class="language-java">package be.vinci;

public class Film {

    private int id;
    private String title;
    private int duration;
    private long budget;
    private String link;

    public Film() {
    }

    public Film(int id, String title, int duration, long budget, String link) {
        this.id = id;
        this.title = title;
        this.duration = duration;
        this.budget = budget;
        this.link = link;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public int getDuration() {
        return duration;
    }

    public void setDuration(int duration) {
        this.duration = duration;
    }

    public long getBudget() {
        return budget;
    }

    public void setBudget(long budget) {
        this.budget = budget;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    @Override
    public String toString() {
        return &quot;Film [id=&quot; + id + &quot;, title=&quot; + title + &quot;, duration=&quot; + duration + &quot;, budget=&quot; + budget + &quot;, link=&quot;
                + link + &quot;]&quot;;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Film film = (Film) o;

        return id == film.id;
    }

    @Override
    public int hashCode() {
        return id;
    }
}
</code></pre><br/><p>Dans <strong>FilmResource</strong>, utilisez ce code pour créer des films par défaut :</p><pre><code class="language-java">private Film[] defaultFilms = {
            new Film(1, &quot;No Time To Die&quot;, 163, 301, &quot;https://en.wikipedia.org/wiki/No_Time_to_Die&quot;),
            new Film(2, &quot;Dune&quot;, 156, 165, &quot;https://en.wikipedia.org/wiki/Dune_(2021_film)&quot;),
            new Film(3, &quot;Shang-Chi and the Legend of the Ten Rings&quot;, 132, 200, &quot;https://en.wikipedia.org/wiki/Shang-Chi_and_the_Legend_of_the_Ten_Rings&quot;),
            new Film(4, &quot;Peter Rabbit 2: The Runaway&quot;, 93, 45, &quot;https://en.wikipedia.org/wiki/Peter_Rabbit_2:_The_Runaway&quot;)
    };
private List&lt;Film&gt; films = new ArrayList&lt;&gt;(Arrays.asList(defaultFilms)); // to get a changeable list, asList is fixed size
</code></pre><br/><p>Veuillez faire en sorte que la méthode <strong>getAll</strong> de <strong>FilmResource</strong> renvoie l’ArrayList de films
et spécifiez que la représentation des ressources renvoyées par votre méthode <strong>getAll</strong> est du JSON :</p><pre><code class="language-java">@GET
@Produces(MediaType.APPLICATION_JSON)
    public List&lt;Film&gt; getAll() {
</code></pre><br/><p>Une méthode annotée par <strong>@GET</strong> répondra aux requêtes <strong>GET</strong> sur la Root Resource.</p><p>Que se passe-t-il si vous tentez d’accéder à une ressource non prise en charge par votre API ?
N’hésitez pas à essayer, par exemple : <a href="http://localhost:8080/movies">http://localhost:8080/movies</a>. </p><br/><p>Pour répondre à des requêtes d’une certaine méthode http, on utilisera l’annotation associée :
par exemple, pour une requête POST, <strong>@POST</strong>…</p><br/><p>Testez la lecture des films...</p><p>Que se passe-t-il ? « Request failed »...</p><p>L’application n’est pas encore capable de sérialiser une ArrayList de films vers du JSON.</p><br/><h2><a id="sectionC3"></a>c.3) Sérialisation via Jackson</h2><p>Nous allons utiliser un package Jackson pour qu&#x27;automatiquement le framework puisse sérialiser des objets
JAVA, comme une ArrayList de films, vers du JSON.</p><p>Pour ce faire, ajoutez une dépendance à Jackson :</p><ul><li>Via IntelliJ : <ul><li>cliquez au sein de votre fichier <strong>/pom.xml</strong> : <strong>Code</strong>, <strong>Generate...</strong>, <strong>Dependency</strong></li><li>tapez : <strong>jersey-medi-json-jackson</strong></li><li>Installez les dépendances Maven en cliquant sur le bouton représentant &quot;<strong>Load Maven Changes</strong>&quot;</li></ul></li><li>Si vous n&#x27;avez pas IntelliJ, ajoutez cela au sein de <strong>/pom.xml</strong> puis forcer l&#x27;installation des dépendances :</li></ul><pre><code class="language-markup">&lt;dependency&gt;
            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;
            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;
            &lt;version&gt;3.0.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><br/><p>Il reste à enregistrer l&#x27;utilisation de Jackson au sein de l&#x27;application.
Pour ce faire, mettez à jour la classe Main :</p><pre><code class="language-java" metastring="{2}"> final ResourceConfig rc = new ResourceConfig().packages(&quot;be.vinci&quot;)
                .register(JacksonFeature.class);
</code></pre><br/><p>Voila, si vous exécutez votre programme, la lecture des films devrait fonctionner
sur <a href="http://localhost:8080/films">http://localhost:8080/films</a></p><br/><h2>c.4) Scope de l&#x27;injection d&#x27;une &quot;Root Resource&quot; au sein du framework</h2><h3>c.4.1) Scope par défaut</h3><p>Maintenant, nous allons cherchez à comprendre le scope de la Root Ressource créée par le framework.</p><p>Pour ce faire, modifiez votre méthode <strong>getAll</strong> pour qu’elle essaie d’effacer toujours le dernier
élément du tableau avant de renvoyer tous les éléments restant du tableau.</p><pre><code class="language-java" metastring="{3-4}">@GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Film&gt; getAll() {
        if(films.size()&gt;0)
            films.remove(films.size()-1);
        return films;
    }
</code></pre><br/><p>Appelez plusieurs fois votre API dans votre browser, en faisant plusieurs refresh sur
<a href="http://localhost:8080/films">http://localhost:8080/films</a></p><p>Que se passe-t-il ?</p><p>A chaque fois on repart avec le même tableau par défaut de ressources, on a toujours qu’un seul élément en moins.
On ne peut donc pas effacer plus d&#x27;un élément.</p><br/><p><strong>Conclusion</strong> : </p><p>Par défaut, une nouvelle instance d’une Route Resource sera créée pour chaque requête matchant l’URI de la Root Resource.
C’est comme si la Root Resource avait été annotée par <strong>@RequestScoped</strong>.
Dans une application RESTful, cela n&#x27;a pas de sens car elle est &quot;stateless&quot;. Dès lors, comme la réponse à une requête
ne dépend pas de l&#x27;état de la ressource, il est inutile de créer une nouvelle instance de ressource pour chaque requête.</p><br/><p>Si vous souhaitez plus de détails concernant le cycle de vie de Root Resources : <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/jaxrs-resources.html#d0e2470">https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/jaxrs-resources.html#d0e2470</a></p><br/><p>Avant de passer au point suivant, nous allons  remettre en ordre la fonction permettant de lire tous les films
(elle ne doit plus effacer de films).</p><pre><code class="language-java">@GET
@Produces(MediaType.APPLICATION_JSON)
public List&lt;Film&gt; getAll() {
    return films;
}
</code></pre><br/><h3>c.4.2) Scope : une instance par application JAX-RS</h3><p>Nous allons modifier le scope de la création en ajoutant l’annotation <strong>@Singleton</strong> dans <strong>FilmResource</strong> :</p><pre><code class="language-java" metastring="{1}">@Singleton
@Path(&quot;films&quot;)
public class FilmResource {
</code></pre><br/><p>Suite à ce changement, vérifiez ce qui se produit au niveau de l&#x27;application.</p><p>On a bien une seule instance de <strong>FilmResource</strong> qui est injectée dans notre application.
Dès lors, à chaque refresh de la page, un film est enlevé, jusqu&#x27;à ce que l&#x27;API renvoie comme JSON un tableau vide.</p><br/><h1><a id="sectionD"></a>d) Gestion des paramètres de requêtes</h1><h2>d.1) Paramètres d’URI via @Path et codes d&#x27;erreur</h2><p>Il est possible d’intégrer des variables dans des URIs.</p><p>Une variable est délimitée par des « <strong>{}</strong> » au sein de l’URI. </p><p>On utilise <strong>@PathParam</strong> pour extraire un paramètre du chemin d’une URI.</p><br/><p>Pour l&#x27;API de gestion de films, nous allons maintenant développer l&#x27;opération de lecture d&#x27;un
film sur base de son id.</p><p>Ajoutez cette nouvelle méthode au sein de <strong>FilmResource</strong> : </p><pre><code class="language-java" metastring="{1,3-4,7-8}">@GET
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
public Film getOne(@PathParam(&quot;id&quot;) int id) {
        Film filmFound = films.stream().filter(film -&gt; film.getId() == id).findAny().orElse(null);
        if (filmFound == null)
            throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                    .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
        return filmFound;
    }
</code></pre><br/><p>Si vous tapez <a href="http://localhost:8080/films/3">http://localhost:8080/films/3</a> dans votre browser,
cela correspond à une requête de type <strong>GET /films/3</strong>. Au sein de la méthode <strong>getOne</strong>, le paramètre
<strong>id</strong> vaudra 3.</p><br/><p>Veuillez noter comment un message de statut est renvoyé au client si aucune resource n&#x27;est trouvée.</p><p>Nous lançons une <strong>WebApplicationException</strong>, en lui passant un code d&#x27;erreur (<strong>NOT_FOUND</strong>), et
nous construisons une réponse en indiquant que le type est du texte (<strong>text/plain</strong>).
Dès lors, la réponse contiendra le code de statut <strong>404</strong> (équivalent de <strong>NOT_FOUND</strong>) et le message
&quot;Resource not found&quot;.</p><br/><p>Veuillez tester la lecture d&#x27;une ressource qui n&#x27;existe pas, par exemple via
<a href="http://localhost:8080/films/5">http://localhost:8080/films/5</a>.</p><br/><h2>d.2) Paramètres de requête via @QueryParam</h2><p>Lors d&#x27;une requête par un client, il est possible de passer des paramètres de requête via l&#x27;URL :
<strong>?key1=value1&amp;key2=value2</strong>.
Ces paramètres se trouvent après le <strong>?</strong> dans l&#x27;URL, sous forme de clé/valeur.
Quand il y a plusieurs paramètres, ils sont séparés par un <strong>&amp;</strong>.</p><br/><p>Grâce à Jersey, on récupère ces paramètres au sein de nos APIs via <strong>@QueryParam</strong>.</p><p>Nous allons maintenant offrir la possibilité de lire tous les films qui ont une durée minimum
à ce qui sera indiqué dans un paramètre de requête, sur base d&#x27;une requête de type
<strong>GET /films?minimum-duration=value</strong>.</p><p>Pour ce faire, nous ne devons pas créer de nouvelle méthode au sein de <strong>FilmResource</strong> mais
nous devons mettre à jour la méthode renvoyant tous les films :</p><pre><code class="language-java" metastring="{3-8}">@GET
@Produces(MediaType.APPLICATION_JSON)
public List&lt;Film&gt; getAll(@DefaultValue(&quot;-1&quot;) @QueryParam(&quot;minimum-duration&quot;) int minimumDuration) {
    if (minimumDuration != -1) {
        List&lt;Film&gt; filmsFiltered = films.stream().filter(film -&gt; film.getDuration() &gt;= minimumDuration)
                .toList();
        return filmsFiltered;
    }
    return films;
}
</code></pre><br/><p>On récupère le paramètre d&#x27;une requête GET nommé <strong>minimum-duration</strong> au sein de <strong>minimumDuration</strong>.</p><p>Par exemple, pour la requête <a href="http://localhost:8080/films?minimum-duration=160">http://localhost:8080/films?minimum-duration=160</a>,
<strong>minimumDuration</strong> de <strong>getAll</strong> vaut <strong>160</strong>.</p><p>Pour une requête de type <strong>GET /films</strong>, si <strong>minimum-duration</strong> n’est pas indiqué dans l&#x27;URL,
le paramètre <strong>minimumDuration</strong> de <strong>getAll</strong> vaudra <strong>-1</strong> grâce à <strong>@DefaultValue(&quot;-1&quot;)</strong>.</p><br/><h2>d.3) Données JSON dans le body de la requête</h2><h3>d.3.1 ) Désérialisation de JSON</h3><p>Nous allons souvent souhaiter récupérer des données qui ont été envoyées au format JSON sein
du body d’une requête client. Quand c&#x27;est le cas, le framework doit pouvoir automatiquement
désérialiser (ou parser) ces données JSON. En d&#x27;autres termes, le framework doit pouvoir injecter
les données JSON dans un objet Java.</p><br/><p>Pour ce faire, notre application JAX-RS a déjà été correctement configurée pour pouvoir
sérialiser / désérialiser des données JSON à l&#x27;aide de Jackson (voir <a href="/baja/modules/1#sectionC3">c.3) Sérialisation via Jackson</a>)</p><br/><p>Nous allons développer l&#x27;opération de création d&#x27;un film au sein de notre application JAX-RS.
Pour appeler cette opération, il faudra faire une requête client de ce type :</p><pre><code class="language-json">POST http://localhost:8080/films 
Content-Type: application/json

{
&quot;title&quot; : &quot;Venom: Let There Be Carnage&quot;,
&quot;duration&quot; : 97,
&quot;budget&quot; : 110,
&quot;link&quot; : &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
} 
</code></pre><br/><p>Veuillez ajouter la fonction <strong>createOne</strong> au sein de <strong>FilmResource</strong> :</p><pre><code class="language-java" metastring="{1,3,4}">@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film createOne(Film film) {
    if (film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    film.setId(films.size() + 1);
    films.add(film);
    return film;
}
</code></pre><br/><p>Pour que le JSON de la requête POST puisse être directement parsé au sein du paramètre <strong>film</strong>,
il faut avoir créé le POJO <strong>Film</strong>, une classe qui contient tous les getters et setters associés
aux attributs d’une ressource de type <strong>Film</strong>. </p><p>Par défaut, Jackson désérialise tous les champs <strong>public</strong>. Pour les champs non public, il désérialise par défaut
tous les champs qui ont un setter.</p><p>Attention, pour la désérialisation via Jackson, il doit exister un constructeur
par défaut (sans paramètres) au sein de votre POJO.
C&#x27;est pour ça qu&#x27;il existe ce constructeur dans la classe <strong>Film</strong> :</p><pre><code class="language-java">public Film() {
    }
</code></pre><br/><p>La requête pour pouvoir appeler l&#x27;opération de création d&#x27;un film est donnée ici :
<a href="/baja/modules/1#sectionF">f) Envoi de requêtes à ses APIs</a></p><br/><p>Plus d&#x27;infos sur la désérialisation via Jackson : </p><p><a href="https://www.baeldung.com/jackson-field-serializable-deserializable-or-not">https://www.baeldung.com/jackson-field-serializable-deserializable-or-not</a></p><br/><br/><h3>d.3.2) Type MIME de la requête et @Consumes</h3><p>Afin de permettre la désérialisation par le framework, on doit préciser le type <strong>MIME</strong> de la représentation de la ressource qui est envoyée dans
le <strong>body</strong> de la requête : </p><p><strong>@Consumes(MediaType.APPLICATION_JSON)</strong>, <strong>@Consumes(&quot;text/plain&quot;)</strong>, …</p><br/><h1><a id="sectionE"></a>e) Gestion des réponses</h1><h2>e.1) Réponses &amp; sérialisation en JSON de POJOs</h2><p>Voici en résumé ce que nous avons déjà vu. </p><p>Pour renvoyer un objet du monde Java sous une représention JSON à un client :</p><ul><li>il faut avoir créé un JavaBean, un POJO comprenant tous les getters associés aux attributs
de la ressource à renvoyer : c&#x27;est le rôle de la classe <strong>Film</strong>.</li><li>il faut indiquer le type de la représentation de la ressource renvoyée via <strong>@Produces</strong> :
c&#x27;est le rôle de <strong>@Produces(MediaType.APPLICATION_JSON))</strong> pour renvoyer du JSON.</li><li>Si l’on souhaite renvoyer un tableau d’objets JSON au client, il suffit de renvoyer
une liste de POJOs via le framework : c&#x27;est le rôle du type de retour <strong><code>List&lt;Film&gt;</code></strong> de la méthode <strong>getAll</strong>.</li></ul><br/><p>De plus, le code http de statut renvoyé, associé à la réponse,
correspond au code 200 quand tout se passe bien (<strong>Status.OK</strong>).</p><br/><h2>e.2) Type MIME de la réponse et @Produces</h2><p>On précisera le type MIME de la ressource qui sera renvoyé au client via soit :
<strong>@Produces(MediaType.APPLICATION_JSON)</strong>, <strong>@Produces(&quot;text/plain&quot;)</strong>, <strong>@Produces(&quot;text/html&quot;)</strong>…</p><br/><h2>e.3) Code http à renvoyer</h2><p>On ne peut pas toujours renvoyer du JSON suite à une requête client ainsi qu’un code
http correspondant au fait que tout est OK (code 200, Status.OK).</p><br/><p>Dans le cadre d’une RESTful API, comme on renvoie généralement des ressources au format JSON,
la réponse est très souvent construite par Jersey et Jackson automatiquement.
Dès lors, si l’on souhaite envoyer autre chose en retour qu’un POJO qui doit être sérialisé,
comme un code d’erreur, il va falloir utiliser une méthode du framework court-circuitant
le processus de sérialisation.</p><br/><p>Pour renvoyer des codes d’erreur, nous l&#x27;avons déjà apperçu précédemment,
nous allons  utiliser le framework pour lancer une <strong>WebApplicationException</strong>.
Cette exception sera utilisée pour construire la réponse à renvoyer
au client. Une <strong>WebApplicationException</strong> reprendra tant le « http status code »
qu’éventuellement un message d’erreur de type <strong>text/plain</strong> dans le corps de la réponse.</p><p>Afin de voir de nouveaux exemple de code d&#x27;erreur, nous allons développer les opérations pour
effacer et mettre à jour un film. Veuillez ajouter ces deux méthodes au sein de <strong>FilmResource</strong> :</p><pre><code class="language-java" metastring="numbered {6-7,10-11,22-23,26-27}">@DELETE
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
public Film deleteOne(@PathParam(&quot;id&quot;) int id) {
    if (id == 0) // default value of an integer =&gt; has not been initialized
        throw new WebApplicationException(Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory id info&quot;)
                .type(&quot;text/plain&quot;).build());
    Film filmToDelete = films.stream().filter(film -&gt; film.getId() == id).findAny().orElse(null);
    if (filmToDelete == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    films.remove(filmToDelete);
    return filmToDelete;
}

@PUT
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film updateOne(Film film, @PathParam(&quot;id&quot;) int id) {
    if (id == 0 || film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    Film filmToUpdate = films.stream().filter(f -&gt; f.getId() == id).findAny().orElse(null);
    if (filmToUpdate == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    film.setId(id);
    films.remove(film); // thanks to equals(), films is found via its id
    films.add(film);
    return film;
}
</code></pre><br/><p>Pour une liste des codes http, vous pouvez consulter :
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</a></p><br/><p>La classes <strong>jakarta.ws.rs.core.Response.Status</strong> donne accès à tous les codes de retour :
<strong>Response.Status.NOT_FOUND</strong>, <strong>Response.Status.BAD_REQUEST</strong>…</p><br/><h1><a id="sectionF"></a>f) Envoi des requêtes à son API</h1><h2>f.1) Test de son API</h2><p>Dans le cadre de ce cours, vous ne devez pas développer de frontend (par exemple en HTML /
JavaScript / CSS) pour tester vos APIs. Cela prendrait trop de temps. </p><p>Nous allons donc utiliser des clients légers permettant de faire des requêtes à nos APIs.</p><p>Pour ce cours, vous pouvez choisir d&#x27;utiliser IntelliJ ou REST Client pour faire vos requêtes.</p><p>Comme nous vous encourageons à utiliser IntelliJ pour développer votre code Java, il est probablement
plus aisé de rester au sein du même environnement de développement en utilisant le client HTTP
d&#x27;IntelliJ.</p><br/><h2>f.2) HTTP Client d&#x27;IntelliJ</h2><p>Dans le cadre de cours, si vous programmez sous IntelliJ, nous vous recommandons d&#x27;utiliser son client
HTTP pour faire vos requêtes vers vos API Rest.</p><br/><p>Quelques notions pour utiliser le client HTTP d&#x27;IntelliJ :</p><ul><li>Il faut créer un fichier <strong>.http</strong> (ou <strong>.rest</strong>) contenant les requêtes vers vos RESTful APIs.<br/>NB : Il est approprié de créer un fichier par Root Resource (par type de ressources).</li><li>Chaque requête est introduite par <strong>###</strong> (3 &quot;<strong>#</strong>&quot;&quot; ou plus)</li><li>Pour exécuter une requête, il suffit de cliquer sur <strong>Run HTTP Request</strong> (le triangle vert à gauche
dans votre éditeur de code)</li><li>Lorsqu’on envoie des données au format JSON, il est important d’avoir un espace avant
les accolades (avant le &quot;<strong>{</strong>&quot; )</li><li>On peut définir des variables d&#x27;environnement dans un &quot;<strong>Environment file</strong>&quot;. Il suffit de cliquer sur
<strong>Add environment file</strong> pour créer un fichier <strong>http-client.env.json</strong> dans lequel vous pouvez ajouter vos variables.
Voici à quoi ressemble une variable <strong>baseUrl</strong> dans <strong>http-client.env.json</strong> : </li></ul><pre><code class="language-json">{
  &quot;dev&quot;: {
    &quot;baseUrl&quot;: &quot;http://localhost:8080&quot;
  }
}
</code></pre><br/><ul><li>Pour utiliser la variable <strong>baseUrl</strong>, il suffit de la mettre entre double accolades. Par exemple, voici
la requête permettant de lire tous les films :</li></ul><pre><code class="language-json">### Read All films
GET {{baseUrl}}/films
</code></pre><br/><p>Nous allons maintenant tester l&#x27;API de gestion de films que nous avons créée pour tout ce que nous
ne pouvons pas tester directement via un browser.</p><br/><p>Au sein de VS Code, veuillez créer un fichier <strong>films.http</strong>.</p><p>Veuillez y ajouter cette requête pour la création d&#x27;un film et exécutez la requête : </p><pre><code class="language-json">@baseUrl = http://localhost:8080
### Create One film
POST {{baseUrl}}/films 
Content-Type: application/json

{
&quot;title&quot; : &quot;Venom: Let There Be Carnage&quot;,
&quot;duration&quot; : 97,
&quot;budget&quot; : 110,
&quot;link&quot; : &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
} 
</code></pre><br/><p>Veuillez ajouter cette requête de suppression d&#x27;un film dans <strong>films.http</strong> et l&#x27;exécuter :</p><pre><code class="language-json">DELETE {{baseUrl}}/films/5
</code></pre><br/><p>Veuillez ajouter cette requête de suppression d&#x27;un film dans <strong>films.http</strong> et l&#x27;exécuter :</p><pre><code class="language-json">### Update One film
PUT {{baseUrl}}/films/4
Content-Type: application/json

{
&quot;title&quot; : &quot;Venom: Let There Be Carnage&quot;,
&quot;duration&quot; : 97,
&quot;budget&quot; : 110,
&quot;link&quot; : &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
} 
</code></pre><br/><h2>f.3) REST Client sous VS Code</h2><p>Dans le cadre de ce cours, nous pouvons aussi utiliser REST Client de Visual Studio Code pour tester nos APIs :
<a href="https://github.com/Huachao/vscode-restclient">https://github.com/Huachao/vscode-restclient</a></p><br/>Il est inutile de lire ce paragraphe si vous avez choisi de faire vos requêtes à l&#x27;aide d&#x27;IntelliJ.<br/><br/><p>Si ça n&#x27;est pas déjà fait, veuillez installer Visual Studio Code.</p><br/>Cliquez sur Extensions au sein de VS Code.<p>Recherchez l’extension <strong>REST Client</strong> et cliquez sur <strong>Install</strong>.</p><br/><p>Quelques notions pour utiliser REST Client :</p><ul><li>Il faut créer un fichier <strong>.http</strong> (ou <strong>.rest</strong>) contenant les requêtes vers vos RESTful APIs.<br/>NB : Il est approprié de créer un fichier par Root Resource (par type de ressources).</li><li>Chaque requête est introduite par <strong>###</strong> (3 &quot;<strong>#</strong>&quot;&quot; ou plus)</li><li>Pour exécuter une requête, il suffit de cliquer sur <strong>Send Request</strong></li><li>Lorsqu’on envoie des données au format JSON, il est important d’avoir un espace avant
les accolades (avant le &quot;<strong>{</strong>&quot; )</li><li>On peut définir des &quot;<strong>File variables</strong>&quot; via ce genre de syntaxe : <strong>@baseUrl = http://localhost:8080/films</strong><br/></li><li>Pour utiliser la variable <strong>baseUrl</strong>, il suffit de la mettre entre double accolades. Par exemple, voici
la requête permettant de lire tous les films :</li></ul><pre><code class="language-json">### Read All films
GET {{baseUrl}}/films
</code></pre><br/><p>Nous allons maintenant tester l&#x27;API de gestion de films que nous avons créée pour tout ce que nous
ne pouvons pas tester directement via un browser.</p><br/><p>Au sein de VS Code, veuillez créer un fichier <strong>films.http</strong>.</p><p>Veuillez y ajouter cette requête pour la création d&#x27;un film et exécutez la requête : </p><pre><code class="language-json">@baseUrl = http://localhost:8080
### Create One film
POST {{baseUrl}}/films 
Content-Type: application/json

{
&quot;title&quot; : &quot;Venom: Let There Be Carnage&quot;,
&quot;duration&quot; : 97,
&quot;budget&quot; : 110,
&quot;link&quot; : &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
} 
</code></pre><br/><p>Veuillez ajouter cette requête de suppression d&#x27;un film dans <strong>films.http</strong> et l&#x27;exécuter :</p><pre><code class="language-json">DELETE {{baseUrl}}/films/5
</code></pre><br/><p>Veuillez ajouter cette requête de suppression d&#x27;un film dans <strong>films.http</strong> et l&#x27;exécuter :</p><pre><code class="language-json">### Update One film
PUT {{baseUrl}}/films/4
Content-Type: application/json

{
&quot;title&quot; : &quot;Venom: Let There Be Carnage&quot;,
&quot;duration&quot; : 97,
&quot;budget&quot; : 110,
&quot;link&quot; : &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
} 
</code></pre><br/><h1><a id="sectionG"></a>g) Sérialisation de fichiers JSON</h1><h2>g.1) Introduction</h2><p>L’utilisation de Jackson est documentée, mais celle-ci semble fort dispersée sur le Web.
Nous avons donc résumé les concepts essentiels ci-dessous. </p><p>Pour ce cours, nous souhaitons que nos ressources soient persistantes, mais sans utiliser de
système de gestion de base de données. Nous allons donc sauvegarder les données dans un fichier JSON.</p><br/><p>Pour chaque opération sur un type de ressources : </p><ul><li>Nous allons charger toutes les ressources se trouvant dans un fichier JSON au sein d&#x27;un objet Java,
une liste d&#x27;objets de type <strong>Film</strong> par exemple.</li><li>Si nécessaire, dans le cadre d&#x27;une opération d&#x27;écriture sur une ou plusieurs ressources,
nous allons mettre à jour la liste d&#x27;objets Java (ou POJOs).</li><li>Si nous avons réalisé une opération d&#x27;écriture, nous allons faire persister ces changements en
sauvegardant la liste d&#x27;Objets Java dans un fichier JSON. On écrase donc le fichier JSON à chaque
opération d&#x27;écriture.<br/><br/></li></ul><p>Pour rappel, notre application JAX-RS a déjà été correctement configurée pour pouvoir
sérialiser / désérialiser des données JSON à l&#x27;aide de Jackson
(voir <a href="/baja/modules/1#sectionC3">c.3) Sérialisation via Jackson</a>).</p><br/><br/><p>Voici quelques références malgré tout pour la documentation, si vous souhaitez approfondir :</p><ul><li>Tutoriel reprenant les fonctions principales de Jackson : <a href="https://www.baeldung.com/jackson-object-mapper-tutorial">https://www.baeldung.com/jackson-object-mapper-tutorial</a> </li><li>Le point d’entrée de Jackson au sein de Jersey : <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/media.html#json.jackson">https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest3x/media.html#json.jackson</a></li><li>Pour une idée de base de la libraire Jackson : <a href="https://github.com/FasterXML/jackson-docs">https://github.com/FasterXML/jackson-docs</a> ou <a href="https://github.com/FasterXML/jackson-databind">https://github.com/FasterXML/jackson-databind</a> </li></ul><br/><h2>g.2) Sérialisation d&#x27;une liste de POJOs dans un fichier JSON</h2><p>Pour rendre les ressources persistantes au sein de notre API de gestion de films, veuillez créer
une nouvelle classe s&#x27;appelant <strong>Json</strong>.</p><p>Au sein de la classe <strong>Json</strong>, voici le code de la méthode <strong>serialize</strong> permettant d’utiliser
le fichier <strong>db.json</strong> pour sérialiser (ou enregistrer) plusieurs types de ressources. Veuillez
bien lire les commentaires pour comprendre le code :</p><pre><code class="language-java">package be.vinci;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ArrayNode;
import com.fasterxml.jackson.databind.node.ObjectNode;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.List;

public class Json {
    private static final String DB_FILE_PATH = &quot;db.json&quot;;
    private static Path pathToDb = Paths.get(DB_FILE_PATH);
    private static final String COLLECTION_NAME = &quot;films&quot;;
    private final static ObjectMapper jsonMapper = new ObjectMapper();

    public static void serialize(List&lt;Film&gt; films) {
        try {
            // if no DB file, write a new collection to a new db file
            if (!Files.exists(pathToDb)) {
                // Create an object and add a JSON array as POJO, e.g. { films:[...]}
                ObjectNode newCollection = jsonMapper.createObjectNode().putPOJO(COLLECTION_NAME, films);
                jsonMapper.writeValue(pathToDb.toFile(), newCollection); // write the JSON Object in the DB file
                return;
            }
            // get all collections : can be read as generic JsonNode, if it can be Object or Array;
            JsonNode allCollections = jsonMapper.readTree(pathToDb.toFile()); // e.g. { users:[...], films:[...]}
            // remove current collection, e.g. remove the array of films
            if (allCollections.has(COLLECTION_NAME)) {
                ((ObjectNode) allCollections).remove(COLLECTION_NAME); //e.g. it leaves { users:[...]}
            }
            // Prepare a JSON array from the list of POJOs for the collection to be updated, e.g. [{&quot;film1&quot;,...}, ...]
            ArrayNode updatedCollection = jsonMapper.valueToTree(films);
            // Add the JSON array in allCollections, e.g. : { users:[...], films:[...]}
            ((ObjectNode) allCollections).putArray(COLLECTION_NAME).addAll(updatedCollection);
            // write to the db file allCollections
            jsonMapper.writeValue(pathToDb.toFile(), allCollections);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
</code></pre><br/><h2>g.2) Parsing d&#x27;un fichier JSON vers une liste de POJOs</h2><p>Dans un 1er temps, on va créer un <strong>JSON Node</strong> sur base d’un fichier JSON et la méthode <strong>readTree</strong>.
Puis nous pouvons utiliser un <strong>Reader</strong> pour charger une liste de POJOs à partir du <strong>JSON Node</strong>.</p><p>Au sein de la classe <strong>Json</strong>, veuillez rajouter le code de la méthode <strong>parse</strong> permettant de
charger une liste de ressources :</p><pre><code class="language-java">public static List&lt;Film&gt; parse() {
    try {
        // get allCollections
        JsonNode node = jsonMapper.readTree(pathToDb.toFile());
        // accessing value of the specified field of an object node,
        // e.g. the JSON array within &quot;films&quot; field of { users:[...], films:[...]}
        JsonNode collection = node.get(COLLECTION_NAME);
        if (collection == null) // Send an empty list if there is not the requested collection
            return new ArrayList&lt;Film&gt;();
        // convert the JsonNode to a List of POJOs &amp; return it
        return jsonMapper.readerForListOf(Film.class).readValue(collection);
    } catch (FileNotFoundException e) {
        return new ArrayList&lt;Film&gt;(); // send an empty list if there is no db file
    } catch (IOException e) {
        e.printStackTrace();
        return new ArrayList&lt;Film&gt;();
    }
}
</code></pre><br/><p>Il faut maintenant mettre à jour <strong>FilmResource</strong> afin d&#x27;utiliser les méthodes <strong>serialize</strong> et
<strong>parse</strong> pour faire persister les ressources :</p><pre><code class="language-java" metastring="numbered {7,20,35,38,49,55,67,75}">@Singleton
@Path(&quot;films&quot;)
public class FilmResource {
@GET
@Produces(MediaType.APPLICATION_JSON)
public List&lt;Film&gt; getAll(@DefaultValue(&quot;-1&quot;) @QueryParam(&quot;minimum-duration&quot;) int minimumDuration) {
    var films = Json.parse();
    if (minimumDuration != -1) {
        List&lt;Film&gt; filmsFiltered = films.stream().filter(film -&gt; film.getDuration() &gt;= minimumDuration)
                .toList();
        return filmsFiltered;
    }
    return films;
}

@GET
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
public Film getOne(@PathParam(&quot;id&quot;) int id) {
    var films = Json.parse();
    Film filmFound = films.stream().filter(film -&gt; film.getId() == id).findAny().orElse(null);
    if (filmFound == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    return filmFound;
}

@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film createOne(Film film) {
    if (film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    var films = Json.parse();
    film.setId(films.size() + 1);
    films.add(film);
    Json.serialize(films);
    return film;
}

@DELETE
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
public Film deleteOne(@PathParam(&quot;id&quot;) int id) {
    if (id == 0) // default value of an integer =&gt; has not been initialized
        throw new WebApplicationException(Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory id info&quot;)
                .type(&quot;text/plain&quot;).build());
    var films = Json.parse();
    Film filmToDelete = films.stream().filter(film -&gt; film.getId() == id).findAny().orElse(null);
    if (filmToDelete == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    films.remove(filmToDelete);
    Json.serialize(films);
    return filmToDelete;
}

@PUT
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film updateOne(Film film, @PathParam(&quot;id&quot;) int id) {
    if (id == 0 || film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    var films = Json.parse();
    Film filmToUpdate = films.stream().filter(f -&gt; f.getId() == id).findAny().orElse(null);
    if (filmToUpdate == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    film.setId(id);
    films.remove(film); // thanks to equals(), films is found via its id
    films.add(film);
    Json.serialize(films);
    return film;
}
}
</code></pre><br/><h1><a id="sectionH"></a>h) Gestion des caractères dangereux</h1><p>Afin de se protéger des attaques XSS (Cross Site Scripting), il faudra éviter de renvoyer
du code JavaScript qui pourrait s’exécuter dans le browser des clients.</p><p>Pour ce faire, dans le cadre de ce cours, nous vous proposons, lors de l’enregistrement de
données qui pourraient être renvoyées aux clients, d’échapper les caractères
potentiellement dangereux.</p><p>Nous utiliserons la librairie <strong>commons-text</strong> d’Apache, mettant notamment à disposition
la méthode <strong>escapeHtml4</strong>. </p><br/><p>Dans le cadre de votre API de gestion de films, veuillez installer la dépendance <strong>commons-text</strong> :</p><ul><li>Via IntelliJ : <ul><li>cliquez au sein de votre fichier <strong>/pom.xml</strong> : <strong>Code</strong>, <strong>Generate...</strong>, <strong>Dependency</strong></li><li>tapez : <strong>commons-text</strong> et sélectionner <strong>org.apache.commons:commons-text</strong></li><li>Installez les dépendances Maven en cliquant sur le bouton représentant &quot;<strong>Load Maven Changes</strong>&quot;</li></ul></li><li>Si vous n&#x27;avez pas IntelliJ, ajoutez cela au sein de <strong>/pom.xml</strong>, puis forcer l&#x27;installation des dépendances :</li></ul><pre><code class="language-markup">&lt;dependency&gt;
            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;
            &lt;version&gt;1.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><br/><p>Mettez à jour <strong>FilmResource</strong> afin d&#x27;échapper les caractères dangereux lors des opérations d&#x27;écriture :</p><pre><code class="language-java" metastring="{10-11,31-32}">@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film createOne(Film film) {
    if (film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    var films = Json.parse();
    film.setId(films.size() + 1);
    film.setTitle(StringEscapeUtils.escapeHtml4(film.getTitle()));
    film.setLink(StringEscapeUtils.escapeHtml4(film.getLink()));
    films.add(film);
    Json.serialize(films);
    return film;
}

@PUT
@Path(&quot;/{id}&quot;)
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Film updateOne(Film film, @PathParam(&quot;id&quot;) int id) {
    if (id == 0 || film == null || film.getTitle() == null || film.getTitle().isBlank())
        throw new WebApplicationException(
                Response.status(Response.Status.BAD_REQUEST).entity(&quot;Lacks of mandatory info&quot;).type(&quot;text/plain&quot;).build());
    var films = Json.parse();
    Film filmToUpdate = films.stream().filter(f -&gt; f.getId() == id).findAny().orElse(null);
    if (filmToUpdate == null)
        throw new WebApplicationException(Response.status(Response.Status.NOT_FOUND)
                .entity(&quot;Ressource not found&quot;).type(&quot;text/plain&quot;).build());
    film.setId(id);
    film.setTitle(StringEscapeUtils.escapeHtml4(film.getTitle()));
    film.setLink(StringEscapeUtils.escapeHtml4(film.getLink()));
    films.remove(film); // thanks to equals(), films is found via its id
    films.add(film);
    Json.serialize(films);
    return film;
}
</code></pre><br/><p>Le manuel utilisateur de cette librairie est disponible ici : <a href="https://commons.apache.org/proper/commons-text/userguide.html">https://commons.apache.org/proper/commons-text/userguide.html</a></p><br/><p><strong>Code du tutoriel</strong> : si vous souhaitez directement accéder au code de la fin du tutoriel de
création d&#x27;une API de gestion de films pour ce module 1 :
<a href="https://github.com/e-vinci/baja-demos/tree/main/films-api-module1">https://github.com/e-vinci/baja-demos/tree/main/films-api-module1</a></p><br/><h1><a id="sectionI"></a>i) Exercice 1.1</h1><p>Veuillez créer une application JAX-RS mettant à disposition des opérations CRUD
(<strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate &amp; <strong>D</strong>elete) sur des ressources de type « texte à dactylographier ».</p><p>Les ressources doivent persister au format JSON et vous devez échapper les caractères dangereux.</p><br/><p>Veuillez partir d&#x27;un archetype Maven comme décrit au point
<a href="/baja/modules/1#sectionB">b) Creation d’une première application sur base d’un Archetype Maven</a>.</p><br/><p>Un texte à dactylographier contient comme attributs : </p><ul><li><strong>id</strong>, un entier ;</li><li><strong>content</strong>, un contenu textuel ;</li><li><strong>level</strong>, le niveau associé au texte. Les seules valeurs autorisées sont :
« <strong>easy</strong> », « <strong>medium</strong> » et « <strong>hard</strong> ».</li></ul><br/><p>Voici le tableau formalisant toutes les opérations associées à votre RESTful API que vous
devez implémenter :</p><br/><table><thead><tr><th>URI</th><th>Méthode</th><th>Méthode</th></tr></thead><tbody><tr><td><strong>texts</strong></td><td>GET</td><td>READ ALL : Lire toutes les ressources de la collection</td></tr><tr><td><strong>texts?level=value</strong></td><td>GET</td><td>READ ALL FILTERED : Lire toutes les ressources de la collection selon le filtre donné</td></tr><tr><td><strong>texts/{id}</strong></td><td>GET</td><td>READ ONE : Lire la ressource identifiée</td></tr><tr><td><strong>texts</strong></td><td>POST</td><td>CREATE ONE : Créer une ressource basée sur les données de la requête</td></tr><tr><td><strong>texts/{id}</strong></td><td>DELETE</td><td>DELETE ONE : Effacer la ressource identifiée</td></tr><tr><td><strong>texts/{id}</strong></td><td>PUT</td><td>UPDATE ONE : Remplacer l’entièreté de la ressource par les données de la requête</td></tr></tbody></table><br/><p>Si lors d’une demande d’ajout ou de modification d’un texte à dactylographier la valeur
de <strong>level</strong> ne correspond pas à une valeur autorisée, veuillez renvoyer un code d’erreur
ainsi que le message d’erreur suivant : « Lacks of mandatory info or unauthorized text level ».</p><br/><p>Veuillez tester toutes les méthodes offertes par votre application JAX-RS à l’aide du client HTTP
d&#x27;IntelliJ ou de REST Client (VS Code).</p></div></main><footer class="footer "><div class="background footer__background"><div class="footer__logo"><h3 class="footer__logo__text">Backend Java</h3><div class="footer__logo__image"></div><div class="footer__logo__image2"></div></div><div class="footer__icons"><ul class="menu"><li><a href="mailto: raphael.baroni@vinci.be" data-email="raphael.baroni@vinci.be" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul></div></div></footer><div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/modules/1/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6df6936a575b77d4169f.js"],"app":["/app-10cc16623ccb3adf054e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-f7f9678fb8e8ba10690b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a3990610164410a1b77e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-1a7c85f2438f2b11de11.js"],"component---src-templates-mdx-pages-js":["/component---src-templates-mdx-pages-js-a770ad5bbe8e99fdedd8.js"]};/*]]>*/</script><script src="/baja/polyfill-6df6936a575b77d4169f.js" nomodule=""></script><script src="/baja/component---src-templates-mdx-pages-js-a770ad5bbe8e99fdedd8.js" async=""></script><script src="/baja/0816e0feb973c1d40069d6902f99c49c22995b76-d1210302a937f7eac85c.js" async=""></script><script src="/baja/a9a7754c-e6f8295ec695f49a0595.js" async=""></script><script src="/baja/app-10cc16623ccb3adf054e.js" async=""></script><script src="/baja/cb1608f2-86e288025e19922e7c24.js" async=""></script><script src="/baja/framework-d6f4909565f689f6944d.js" async=""></script><script src="/baja/webpack-runtime-05b7e4fe05b61938ab31.js" async=""></script></body></html>