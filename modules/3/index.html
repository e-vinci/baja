<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/baja/styles.e66be5681e6c344a18d4.css" data-identity="gatsby-global-css">*{box-sizing:border-box;margin:0;padding:0}.body,.section{color:#2e2e28;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.section{display:flex;flex-flow:row wrap;min-height:10px;width:100%}.section__content{box-sizing:border-box;flex:1 1 100%;flex-wrap:wrap;padding-left:1rem;padding-right:1rem;padding-top:1rem}.section__content--no-auto-margin{padding-left:0}@media only screen and (min-width:992px){.section__content{flex-basis:50%}}.section__header{align-self:flex-start;flex:1 1 100%;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;min-height:10px;padding-left:1rem;padding-right:1rem;text-align:center}.section__header--left{padding-left:1rem;text-align:left}.section__footer{align-self:flex-end;flex:1 1 100%;justify-content:center;min-height:5vh;padding-bottom:1rem;padding-left:1rem;padding-right:1rem;text-align:center}.section__background{background-size:cover;display:flex;flex-flow:row wrap;min-height:10px;width:100%}.section a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.section a:focus,.section a:hover{color:#656558}.header--overlay{left:0;position:absolute;top:0;width:100%;z-index:10}main{background-color:#fffff5;color:#2e2e28;flex-grow:1}.footer,main{font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.footer{background-color:#2e2e28;color:#fff}.footer__icons li:last-of-type{margin-right:0}.footer__background{align-items:center;display:flex;justify-content:space-between;min-height:8vh;padding:1rem}.footer__logo{height:100%}.footer__logo__text{color:#fff;display:inline-block;font-family:MeriendaOne,sans-serif;font-size:1.7rem;font-weight:300}.footer__logo__image{background-image:url(data:image/png;base64,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);background-position:0,100%;min-height:3rem;min-width:30vw}.footer__logo__image,.footer__logo__image2{background-repeat:no-repeat;background-size:contain;display:inline-block;margin-left:1rem;vertical-align:middle}.footer__logo__image2{background-position:50%;min-height:2rem;min-width:10vw}.master{display:flex;flex-direction:column;min-height:100vh;position:relative}.page{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}.page--auto-margin{padding:1rem}.page--auto-margin ol,.page--auto-margin ul{padding-left:1.3rem;padding-right:1.3rem}.page a{color:#2e2e28;cursor:pointer;-webkit-hyphens:auto;hyphens:auto}.page a:focus,.page a:hover{color:#656558}.page table{border-collapse:collapse;margin-top:.5rem}.page table td,.page table th{border:thin solid gray;padding:.2rem;text-align:left;vertical-align:top}.page strong{font-family:Roboto Bold}.grid{position:relative}.grid__background-image-wrapper__image{padding:0}.grid__content{display:block;left:0;position:absolute;top:0}.table{border:0;border-bottom:1px solid #ccc;border-collapse:collapse;border-spacing:2px;border-top:3px solid;color:#000;margin:2rem 0;table-layout:fixed;text-indent:0;width:100%}.table td{border:1px solid #ccc;border-bottom:0;border-left:0;border-right:0;padding:.75rem;vertical-align:top;width:75%}.table th{word-wrap:break-word;border:1px solid #ccc;border-bottom:0;border-left:0;-webkit-hyphens:auto;hyphens:auto;padding:.75rem .75rem .75rem 0;text-align:left;vertical-align:top;width:25%}.background{display:flex;z-index:0}.background__image{display:grid}.background--header{z-index:10}.menu{align-items:center;display:flex;list-style:none;margin:0;width:100%}.menu a{color:#fffff5;font-size:1.3rem}.menu a:hover{color:#fffd75;transition:color .3s ease-in}.menu li{margin-right:1rem}.card{background-color:#b54ff9;border-radius:.5rem;display:block;-webkit-hyphens:auto;hyphens:auto;margin-bottom:.5rem;padding:.5rem;width:100%;word-break:break-word}.card--fill-wrapper{height:100%}.card--dark-summary{background-color:#2e2e28;border-radius:0;color:#fffff5}.card__header{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;padding:.5rem;text-align:center}.card__content{display:grid;grid-template-columns:1fr 2fr;width:100%}@media only screen and (min-width:576px){.card__content{grid-template-columns:150px 2fr}}.card__content--long-titles{grid-template-columns:2fr 1fr}@media only screen and (min-width:576px){.card__content--long-titles{grid-template-columns:2fr 150px}}.card__content--orange{color:orange!important}.card__content__title{color:#fffff5;font-weight:300;padding-bottom:.5rem;padding-right:.5rem}.card__content__description{padding-bottom:.5rem}.card__content__description a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.card__content__description a:focus,.card__content__description a:hover{color:#656558}.card__content__description input{height:1.3rem;vertical-align:middle;width:1.3rem}.card__content__description__subitems{list-style:none}.card__content__description__subitems__item{border:.5px solid #fffff5;border-radius:.5rem;margin-bottom:.5rem;padding:.5rem}.card__content__description__subitems__item:last-child{margin-bottom:0}.navbar{align-items:center;background-color:#a01ef7;display:flex;flex-basis:100%;flex-wrap:wrap;font-family:MeriendaOne,sans-serif;font-size:large;font-weight:300;justify-content:space-between;margin:0;padding:1rem;position:relative;width:100%;z-index:100}@media only screen and (min-width:992px){.navbar{flex-wrap:nowrap;justify-content:flex-start}}.navbar__toggler{background-color:transparent;border:1px solid #fffff5;border-radius:.25rem;cursor:pointer;display:inline-block;font-size:1.25rem;line-height:1;padding:.25rem .75rem;transition:box-shadow .15s ease-in-out}@media only screen and (min-width:992px){.navbar__toggler{display:none}}.navbar__toggler__icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='hsl(59, 100%, 98%)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")!important;background-position:50%;background-repeat:no-repeat;display:inline-block;height:1.5em;vertical-align:middle;width:1.5em}.navbar__brand{color:#fffff5;font-size:1.7rem;margin-right:1rem;padding-bottom:.3125rem;padding-top:.3125rem;text-decoration:none;white-space:nowrap}.navbar__menu{align-items:center;display:none;flex-basis:100%;flex-grow:1}.navbar__menu--collapse{display:flex}@media only screen and (min-width:992px){.navbar__menu{display:flex;flex-basis:auto}}.navbar__menu__list{display:flex;flex-direction:column;list-style:none}@media only screen and (min-width:992px){.navbar__menu__list{flex-direction:row}}.navbar__menu__list__item{display:list-item;padding-bottom:.5rem;padding-top:.5rem;position:relative}@media only screen and (min-width:992px){.navbar__menu__list__item{padding-left:.5rem;padding-right:.5rem}}.navbar__menu__list__item__link{color:#fffff5;cursor:pointer;display:block;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.navbar__menu__list__item__link:focus,.navbar__menu__list__item__link:hover{color:#fffd8f}.navbar__menu__list__item__link--dropdown-toggle:after{border-bottom:0;border-left:.3em solid transparent;border-right:.3em solid transparent;border-top:.3em solid;content:"";display:inline-block;margin-left:.255em;vertical-align:.255em}.navbar__menu__list__item__dropdown-menu{background-clip:padding-box;background-color:#fffff5;border:1px solid #2e2e28;border-radius:.25rem;color:#2e2e28;display:none;left:0;list-style:none;margin-top:.125rem;min-width:10rem;padding:.5rem 0;position:static;text-align:left;top:100%;z-index:1000}@media only screen and (min-width:992px){.navbar__menu__list__item__dropdown-menu{position:absolute}}.navbar__menu__list__item__dropdown-menu--collapsed{display:block}.navbar__menu__list__item__dropdown-menu__item{display:list-item;padding:.5rem;position:relative}.navbar__menu__list__item__dropdown-menu__item:focus,.navbar__menu__list__item__dropdown-menu__item:hover{background-color:#e0e0dc}.navbar__menu__list__item__dropdown-menu__item__link{color:#2e2e28;cursor:pointer;display:block;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.navbar__menu__list__item__dropdown-menu__item__link:focus,.navbar__menu__list__item__dropdown-menu__item__link:hover{color:#656558}@media only screen and (min-width:992px){.navbar{display:flex;flex-basis:auto}}.navbar--transparent-background{background-color:transparent;background-image:none}.navbar--top-of-page{left:0;position:absolute;top:0}.carousel__wrapper{background-color:#a01ef7;background-image:linear-gradient(180deg,#a01ef7 25%,#ca80fb);box-sizing:border-box;height:auto;margin-top:1rem;max-width:100%;width:100%}.carousel__wrapper__background{display:block}.carousel__wrapper__background--transparent{background-color:transparent;background-image:none}.quote{display:flex;height:100%;justify-content:center;max-width:100vw;padding:30px 20px 60px;width:100%}.quote--close-to-others{padding-bottom:1rem;padding-top:0}.quote__content{align-self:flex-start;border-bottom:1px solid;border-top:1px solid;color:#fffff5;padding:30px 0;position:relative}.quote__content--dark-and-wide{color:#2e2e28;padding:30px 0;width:100%}.quote__content h3{color:#fffff5;position:relative}.quote__content h4{color:#2e2e28;margin:0;padding-top:20px;position:relative}.quote__content h4:before{content:"— "}.quote__content:after{bottom:-43px;color:#fffff5;content:"”";font-size:10rem;line-height:0;position:absolute;right:30px}.schedule{color:#2e2e28;display:flex;flex-direction:column;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400;gap:.5rem;width:100%}.schedule__header1,.schedule__header2,.schedule__header3,.schedule__header4{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-size:large;font-weight:300;line-height:1.5rem;text-align:left}.schedule__title{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-size:medium;font-weight:300;line-height:1.5rem}.schedule__title1:not(.schedule__title),.schedule__title2:not(.schedule__title),.schedule__title3:not(.schedule__title),.schedule__title4:not(.schedule__title){display:none}.schedule__session{background-color:#b54ff9;border-radius:.5rem;display:flex;flex-direction:row;flex-wrap:wrap;min-height:5rem;padding:.5rem;width:100%}.schedule__session__title{align-self:flex-start;color:#fffff5;font-weight:700;text-align:center;width:100%}.schedule__session__time{align-self:flex-end;font-weight:700;text-align:center;width:100%}@media only screen and (min-width:576px){.schedule{color:#2e2e28;display:grid;font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400;grid-template:"headertitle header1 header2  header3  header4" "scheduletitle1 monday1 wednesday1 thursday1 friday1" "scheduletitle2 monday2 wednesday2 thursday2 friday2" "scheduletitle3 monday3 wednesday3 thursday3 friday3" "scheduletitle4 monday4 wednesday4 thursday4 friday4";grid-template-columns:repeat(5,1fr);width:100%}.schedule__title1{display:block;font-size:large;grid-area:scheduletitle1}.schedule__title2{display:block;font-size:large;grid-area:scheduletitle2}.schedule__title3{display:block;font-size:large;grid-area:scheduletitle3}.schedule__title4{display:block;font-size:large;grid-area:scheduletitle4}.schedule__header1{grid-area:header1;text-align:center}.schedule__header2{grid-area:header2;text-align:center}.schedule__header3{grid-area:header3;text-align:center}.schedule__header4{grid-area:header4;text-align:center}.schedule__monday1{grid-area:monday1}.schedule__monday2{grid-area:monday2}.schedule__monday3{grid-area:monday3}.schedule__monday4{grid-area:monday4}.schedule__wednesday1{grid-area:wednesday1}.schedule__wednesday2{grid-area:wednesday2}.schedule__wednesday3{grid-area:wednesday3}.schedule__wednesday4{grid-area:wednesday4}.schedule__thursday1{grid-area:thursday1}.schedule__thursday2{grid-area:thursday2}.schedule__thursday3{grid-area:thursday3}.schedule__thursday4{grid-area:thursday4}.schedule__friday1{grid-area:friday1}.schedule__friday2{grid-area:friday2}.schedule__friday3{grid-area:friday3}.schedule__friday4{grid-area:friday4}.schedule__title:not(.schedule__title1):not(.schedule__title2):not(.schedule__title3):not(.schedule__title4){display:none}}.list{padding-left:1rem;padding-top:1rem}.index{grid-gap:1rem;display:grid;grid-template-columns:1fr}@media only screen and (min-width:576px){.index{grid-template-columns:1fr 1fr}}@media only screen and (min-width:1200px){.index{grid-template-columns:1fr 1fr 1fr}}.index__search{display:block;grid-column-end:-1;grid-column-start:1;margin-bottom:1rem;margin-top:1rem;padding:.5rem;width:100%}.index__button{background-color:#2e2e28;border:none;border-radius:.25rem;color:#fffff5;cursor:pointer;display:inline-block;margin-top:1rem;padding:.375rem .75rem;text-align:center;vertical-align:middle}.index__button:hover{background-color:#4a4a40}.index__card{background-color:#b54ff9;border-radius:.5rem;display:block;-webkit-hyphens:auto;hyphens:auto;padding:.5rem;width:100%;word-break:break-word}.index__card__header{display:block;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem;padding:.5rem;text-align:center}.index__card__content{display:grid;grid-template-columns:1fr 2fr;width:100%}.index__card__content__title{color:#fffff5;font-weight:300;padding-bottom:.5rem;padding-right:.5rem}.index__card__content__description{padding-bottom:.5rem}.index__card__content__description a{color:#2e2e28;cursor:pointer;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}.index__card__content__description a:focus,.index__card__content__description a:hover{color:#656558}.index__card__content__description input{height:1.3rem;vertical-align:middle;width:1.3rem}.index__card__content__description__subitems{list-style:none}.index__card__content__description__subitems__item{border:.5px solid #fffff5;border-radius:.5rem;margin-bottom:.5rem;padding:.5rem}.index__card__content__description__subitems__item:last-child{margin-bottom:0}.index__card__content__description--is-being-edited{background-color:#fffff5;margin-bottom:.5rem;padding:.3rem}.index__card__content__description--is-inline{display:inline-block}.index__card--is-being-edited{animation:gradient 2s linear infinite;animation-direction:alternate;background:linear-gradient(45deg,#a01ef7,#8e1ef7,#7c1ef7,#6a1ef7,#581ef7,#461ef7);background-size:600% 100%}@keyframes gradient{0%{background-position:0}to{background-position:100%}}.index .fa-plus-circle{margin-right:.5rem}.index .fa-check-circle{color:green;font-size:1.5rem}.index .fa-minus-circle,.index .fa-times-circle{color:red;font-size:1.5rem}.index .fa-comment-dots,.index .fa-edit,.index .fa-eye,.index .fa-save,.index .fa-times,.index .fa-trash-alt,.index .fa-user-plus,.index .fa-user-times{cursor:pointer;margin-bottom:.5rem;margin-right:.5rem}.index .fa-comment-dots:hover,.index .fa-edit:hover,.index .fa-eye:hover,.index .fa-save:hover,.index .fa-times:hover,.index .fa-trash-alt:hover,.index .fa-user-plus:hover,.index .fa-user-times:hover{color:#4a4a40}.index--long-text{grid-column-end:-1;grid-column-start:1}@media only screen and (min-width:576px){.index--long-text .index__card__content{grid-template-columns:200px 1fr!important}}.spinner__overlay{background:rgba(0,0,0,.7);bottom:0;left:0;position:fixed;right:0;top:0;z-index:5}.spinner__animation{color:#a01ef7;left:50%;position:fixed;top:50%;transform:translate(-50%,-50%);z-index:10}.summary{grid-gap:1rem;display:grid;grid-template-columns:1fr;padding-top:1rem}@media only screen and (min-width:576px){.summary{grid-template-columns:1fr 1fr}}.summary__card-wrapper{display:block;width:100%}.summary__card-wrapper:only-child{grid-column-end:-1;grid-column-start:1;margin-left:auto;margin-right:auto;width:100%}@media only screen and (min-width:576px){.summary__card-wrapper:only-child{width:50%}}@media only screen and (min-width:1200px){.summary__card-wrapper:only-child{width:33%}}.summary .fa-comment,.summary .fa-heart{margin-right:.5rem}.summary .fa-heart{color:red}.summary .fa-comment{color:green}.counter{background-color:#2e2e28;display:flex;justify-content:space-evenly;padding-bottom:.5rem;padding-top:.5rem}.counter__symbol{margin-right:.2rem}.counter__symbol--red{color:red}.counter__symbol--orange{color:orange}.counter__symbol--green{color:green}.codeblock{margin-bottom:.5rem;margin-top:.5rem;overflow:auto}.codeblock pre[class*=language-]{float:left;min-width:100%;padding:.5rem}.codeblock__header{border-bottom:thin solid #9acd32;display:flex;justify-content:flex-start;margin-bottom:.5rem;padding-bottom:.3rem;padding-top:.3rem}.codeblock__header__copy-button{background:none;border:none;color:#fff;cursor:pointer;padding-right:1rem}.codeblock__header__language-name{color:#9acd32}.codeblock__body__line{display:block;min-width:100%}.codeblock__body__line--highlighted{background-color:#353b45}.codeblock__body__line__number{display:table-cell;opacity:.5;-webkit-user-select:none;user-select:none;width:2.5rem}.codeblock__body__line__content{display:table-cell}.scrollable-image{overflow:auto}.scrollable-image__wrapper{display:inline-block;width:100%}@font-face{font-display:swap;font-family:Kavoon;src:url(/baja/static/Kavoon-Regular-942c5ec99a683f33cbd21f88d0c771dc.ttf)}@font-face{font-display:swap;font-family:MeriendaOne;font-size:15vh;src:url(/baja/static/MeriendaOne-Regular-e9c591ea2539ec7dc624851057cb737b.ttf)}@font-face{font-display:swap;font-family:Apercu Pro Regular;src:url("/baja/static/Apercu Pro Regular-c90f8890213c974793f9a1f665d86410.otf")}@font-face{font-display:swap;font-family:Roboto Regular;src:url(/baja/static/Roboto-Regular-a8d6ac03c7b96b7acb6228ff2676139d.ttf)}@font-face{font-display:swap;font-family:Roboto Bold;src:url(/baja/static/Roboto-Bold-f80816a5455d171f948d98c32f20c46e.ttf)}@font-face{font-display:swap;font-family:Baloo Bhaina\ 2 Bold;src:url(/baja/static/BalooBhaina2-Bold-0c4963b78753a15075509a388f17234e.ttf)}h1{color:#2e2e28;font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:xx-large;font-weight:300;line-height:2rem}h2,h3{font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.7rem}.text,h2,h3{color:#2e2e28}.text{font-family:Roboto Regular,sans-serif;font-size:large;font-weight:400}.text--light{color:#fffff5!important}.text--italic{font-style:italic!important}.text--emphasized{font-family:Baloo Bhaina\ 2 Bold,sans-serif;font-size:x-large;font-weight:300;line-height:1.5rem}.text--hand-written{font-family:MeriendaOne,sans-serif;font-size:large;font-weight:300}.ml-0{margin-left:0!important}.ml-1{margin-left:.25rem!important}.ml-2{margin-left:.5rem!important}.ml-3{margin-left:1rem!important}.ml-4{margin-left:1.5rem!important}.ml-5{margin-left:3rem!important}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mr-0{margin-right:0!important}.mr-1{margin-right:.25rem!important}.mr-2{margin-right:.5rem!important}.mr-3{margin-right:1rem!important}.mr-4{margin-right:1.5rem!important}.mr-5{margin-right:3rem!important}.pl-0{padding-left:0!important}.pl-1{padding-left:.25rem!important}.pl-2{padding-left:.5rem!important}.pl-3{padding-left:1rem!important}.pl-4{padding-left:1.5rem!important}.pl-5{padding-left:3rem!important}.pt-0{padding-top:0!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pt-3{padding-top:1rem!important}.pt-4{padding-top:1.5rem!important}.pt-5{padding-top:3rem!important}.pb-0{padding-bottom:0!important}.pb-1{padding-bottom:.25rem!important}.pb-2{padding-bottom:.5rem!important}.pb-3{padding-bottom:1rem!important}.pb-4{padding-bottom:1.5rem!important}.pb-5{padding-bottom:3rem!important}.pr-0{padding-right:0!important}.pr-1{padding-right:.25rem!important}.pr-2{padding-right:.5rem!important}.pr-3{padding-right:1rem!important}.pr-4{padding-right:1.5rem!important}.pr-5{padding-right:3rem!important}.vh-5{height:5vh}.vh-10{height:10vh}.vh-15{height:15vh}.vh-20{height:20vh}.vh-25{height:25vh}.vh-30{height:30vh}.vh-35{height:35vh}.vh-40{height:40vh}.vh-45{height:45vh}.vh-50{height:50vh}.vh-55{height:55vh}.vh-60{height:60vh}.vh-65{height:65vh}.vh-70{height:70vh}.vh-75{height:75vh}.vh-80{height:80vh}.vh-85{height:85vh}.vh-90{height:90vh}.vh-95{height:95vh}.vh-100{height:100vh}.vw-5{flex-basis:5vw;width:5vw}.vw-10{flex-basis:10vw;width:10vw}.vw-15{flex-basis:15vw;width:15vw}.vw-20{flex-basis:20vw;width:20vw}.vw-25{flex-basis:25vw;width:25vw}.vw-30{flex-basis:30vw;width:30vw}.vw-35{flex-basis:35vw;width:35vw}.vw-40{flex-basis:40vw;width:40vw}.vw-45{flex-basis:45vw;width:45vw}.vw-50{flex-basis:50vw;width:50vw}.vw-55{flex-basis:55vw;width:55vw}.vw-60{flex-basis:60vw;width:60vw}.vw-65{flex-basis:65vw;width:65vw}.vw-70{flex-basis:70vw;width:70vw}.vw-75{flex-basis:75vw;width:75vw}.vw-80{flex-basis:80vw;width:80vw}.vw-85{flex-basis:85vw;width:85vw}.vw-90{flex-basis:90vw;width:90vw}.vw-95{flex-basis:95vw;width:95vw}.vw-100{flex-basis:100vw;width:100vw}.w-5{flex-basis:5%;width:5%}.w-10{flex-basis:10%;width:10%}.w-15{flex-basis:15%;width:15%}.w-20{flex-basis:20%;width:20%}.w-25{flex-basis:25%;width:25%}.w-30{flex-basis:30%;width:30%}.w-35{flex-basis:35%;width:35%}.w-40{flex-basis:40%;width:40%}.w-45{flex-basis:45%;width:45%}.w-50{flex-basis:50%;width:50%}.w-55{flex-basis:55%;width:55%}.w-60{flex-basis:60%;width:60%}.w-65{flex-basis:65%;width:65%}.w-70{flex-basis:70%;width:70%}.w-75{flex-basis:75%;width:75%}.w-80{flex-basis:80%;width:80%}.w-85{flex-basis:85%;width:85%}.w-90{flex-basis:90%;width:90%}.w-95{flex-basis:95%;width:95%}.w-100{flex-basis:100%;width:100%}.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;line-height:inherit;position:absolute;text-align:center;width:2em}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s linear infinite;animation:fa-spin 2s linear infinite}.fa-pulse{-webkit-animation:fa-spin 1s steps(8) infinite;animation:fa-spin 1s steps(8) infinite}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}</style><meta name="generator" content="Gatsby 3.15.0"/><title data-react-helmet="true">Module 3 : JAX-RS avancé</title><meta data-react-helmet="true" name="description" content="JAX-RS avancé"/><meta data-react-helmet="true" property="og:url" content="https://e-vinci.github.io/baja/baja/modules/3/"/><meta data-react-helmet="true" property="og:title" content="Module 3 : JAX-RS avancé"/><meta data-react-helmet="true" property="og:description" content="JAX-RS avancé"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/baja/favicon-32x32.png" type="image/png"/><link rel="icon" href="/baja/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="/baja/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#303030"/><link rel="apple-touch-icon" sizes="48x48" href="/baja/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/baja/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/baja/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/baja/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/baja/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/baja/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/baja/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/baja/icons/icon-512x512.png"/><link as="script" rel="preload" href="/baja/webpack-runtime-1a988f899203af32e814.js"/><link as="script" rel="preload" href="/baja/framework-c7047573e5c239accf9e.js"/><link as="script" rel="preload" href="/baja/cb1608f2-054445c79c06534b5035.js"/><link as="script" rel="preload" href="/baja/app-506270a00a3559d88775.js"/><link as="script" rel="preload" href="/baja/a9a7754c-8d57bce12b88a78cd7d6.js"/><link as="script" rel="preload" href="/baja/0816e0feb973c1d40069d6902f99c49c22995b76-bedc1d1846d5a3c8be55.js"/><link as="script" rel="preload" href="/baja/component---src-templates-mdx-pages-js-3ceb1fe9d635f65ff425.js"/><link as="fetch" rel="preload" href="/baja/page-data/modules/3/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/1858702104.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/2153498299.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/3028011774.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/sq/d/3458129946.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/baja/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="master"><header class="header "><nav class="navbar "><a class="navbar__brand" href="/baja/">Backend Java</a><button class="navbar__toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar__toggler__icon"></span></button><div class="navbar__menu " id="navbarSupportedContent"><ul class="navbar__menu__list"><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/">Home</a></li><li class="navbar__menu__list__item"><a class="navbar__menu__list__item__link navbar__menu__list__item__link--dropdown-toggle">Contenu du cours</a><ul class="navbar__menu__list__item__dropdown-menu " aria-labelledby="navbarDropdown"><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/intro">Introduction</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/1">Module 1 : découverte de JAX-RS</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/2">Module 2 : JAX-RS &amp; auths</a></li><li class="navbar__menu__list__item__dropdown-menu__item"><a aria-current="page" class="navbar__menu__list__item__dropdown-menu__item__link" href="/baja/modules/3">Module 3 : JAX-RS avancé</a></li></ul></li><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/repositories">Repositories</a></li><li class="navbar__menu__list__item"><a aria-current="page" class="navbar__menu__list__item__link" href="/baja/about">About</a></li></ul></div></nav></header><main class="main"><div class="page page--auto-margin"><h1>Module 3 : JAX-RS avancé</h1><p>Ce module vous offre le refactor d&#x27;une application JAX-RS pour appliquer les bonnes pratiques
du monde Java et approfondir certains concepts associés à la gestion des exceptions
et à la sérialisation au sein du framework. </p><p>Voici les sujets traités :</p><ul><li>a) <a href="/baja/modules/3#sectionA">Bonnes pratiques Java : &quot;Factory&quot; et injection de dépendances</a></li><li>b) <a href="/baja/modules/3#sectionB">Mapping d&#x27;exceptions à des réponses</a></li><li>c) <a href="/baja/modules/3#sectionC">Sérialisation de POJOs et filtrage d&#x27;attributs</a></li><li>d) <a href="/baja/modules/3#sectionD">Exercice 3.1</a></li><li>e) <a href="/baja/modules/3#sectionE">🍬 Exercice 3.2 optionnel</a></li></ul><br/><h1><a id="sectionA"></a>a) Bonnes pratiques Java : &quot;Factory&quot; et injection de dépendances</h1><h2>a.1) Introduction</h2><p>Dans les modules 1 &amp; 2, nous avons développé ensemble une RESTful API permettant de gérer des films.</p><p>Nous allons maintenant faire un refactor de cette application afin de mieux architecturer le code.
Voici les motivations pour réarchitecturer l&#x27;API :</p><ul><li>abstraction de l&#x27;implémentation de classes par l&#x27;utilisation d&#x27;interfaces ;
ainsi, lors d&#x27;interactions entre des objets de différents types, on ne doit pas se soucier
de l&#x27;implémentation des classes ; l&#x27;auteur d&#x27;une classe peut mettre à jour son implémentation
sans casser les interactions avec celle-ci ;
cela participe à la mise en place d&#x27;un couplage faible entre objets ;</li><li>éviter le couplage fort entre objets, notamment en injectant les objets de service
(n&#x27;ayant pas d&#x27;états) et en utilisant des « Factory » pour créer des objets
du domaine (ayant un état).</li></ul><br/><h2>a.2) Les « Factory »</h2><p>Une « Factory » permet de créer des objets sans exposer leur logique de création
(au programme client appelant ces objets).</p><br/><p>On créera donc des objets du domaine, des objets ayant un état, via une « Factory » spécifique.</p><br/><p>De plus, pour ne pas dépendre d&#x27;une « Factory » spécifique, on pourra créer une interface
pour chaque implémentation d&#x27;une « Factory ».</p><br/><p>Nous allons donc mettre à jour notre API de gestion de films pour utiliser une factory :</p><ul><li>Extraire l&#x27;interface de <strong>Film</strong>. Via IntelliJ :<ul><li>Clic droit sur <strong>Film</strong>, <strong>Refactor</strong>, <strong>Extract Interface...</strong></li><li>Sélection de <strong>Rename original class and use interface where possible</strong></li><li>Pour <strong>Rename implementation class to</strong>, écrivez : <strong>FilmImpl</strong></li><li>Pour <strong>Members To Form Interface</strong>, sélectionnez (quasi) tout ; il n&#x27;est pas utile de
sélectionner les méthodes qui redéfinissent la classe <strong>Object</strong> (<strong>toString</strong>, <strong>equals</strong>,
<strong>hashCode</strong>...)</li></ul></li><li>L&#x27;interface <strong>Film</strong> est maintenant implémentée par <strong>FilmImpl</strong></li><li>De la même façon, veuillez extraire l&#x27;interface de <strong>User</strong> et renommer la classe
<strong>User</strong> en <strong>UserImpl</strong>.</li><li>Attention, les classes implémentant vos interfaces ne doivent pas être <strong>public</strong>.
Supprimez <strong>public</strong> pour rendre vos classes &quot;package friendly&quot;. Ainsi, seulement la factory
aura la possibilité de créer des objets du domaine.</li><li>Créer la classe <strong>DomainFactory</strong> au sein du package <strong>domain</strong>. Voici le code :</li></ul><pre><code class="language-java">package be.vinci.domain;

public class DomainFactory{
    @Override
    public Film getFilm() {
        return new FilmImpl();
    }

    @Override
    public User getUser() {
        return new UserImpl();
    }
}
</code></pre><ul><li>Extraire l&#x27;interface de <strong>DomainFactory</strong> et renommer cette classe en <strong>DomainFactoryImpl</strong> :
le contrat (ou l&#x27;interface) <strong>DomainFactory</strong> est maintenant implémentée par le service <strong>DomainFactoryImpl</strong> qui permet la création d&#x27;instance de <strong>FilmImpl</strong> ou de <strong>UserImpl</strong>.</li><li>Mettez à jour le code de votre API partout où des objets du domaine sont créés en utilisant
la factory. Dans un premier temps, nous allons créer une instance de la factory là où
elle doit être utilisée. Par la suite, nous verrons comment injecter une dépendance et devenir
indépendant de l&#x27;implémentation de la factory là où elle est utilisée.
Le seul endroit où l&#x27;on crée un objet du domaine directement, c&#x27;est dans <strong>UserDataService</strong>.
Modifiez cette classe :</li></ul><pre><code class="language-java" metastring="{3,9}">public class UserDataService {
    //...
    private static DomainFactory myDomainFactory = new DomainFactoryImpl();
    //...
    public ObjectNode register(String login, String password) {
        User tempUser = getOne(login);
        if (tempUser != null) // the user already exists !
            return null;
        tempUser = myDomainFactory.getUser();
    //...
</code></pre><ul><li>Vérifiez dans <strong>FilmDataService</strong> et <strong>UserDataService</strong> que <strong>jsonDB</strong> est créé en passant
l&#x27;interface (et non l&#x27;implémentation), par exemple pour <strong>UserDataService</strong> :</li></ul><pre><code class="language-java">private static Json&lt;User&gt; jsonDB = new Json&lt;&gt;(User.class);
</code></pre><br/><p>A ce stade-ci, la librairie <strong>Jackson</strong> qui s&#x27;occupe de la désérialisation ne connait pas
l&#x27;implémentation à utiliser pour les POJOs. </p><br/><p>Si vous exécutez l&#x27;application, elle lancera des exceptions lorsque vous appellerez certaines
opérations.</p><br/><h2>a.3) Désérialisation vers des POJOs cachés par une interface</h2><p>Afin de diminuer le couplage des objets, les objets du domaine sont cachés
derrière des interfaces.</p><br/><p>Afin que <strong>Jackson</strong> sache quelle implémentation est à utiliser pour la désérialisation
de JSON vers des POJOs associés à une interface, il faut l&#x27;indiquer via l&#x27;annotation
<strong>@JsonDeserialize</strong>.</p><br/><p>Veuillez mettre à jour le code de <strong>Film</strong> :</p><pre><code class="language-java" metastring="{3}">import com.fasterxml.jackson.databind.annotation.JsonDeserialize;

@JsonDeserialize(as = FilmImpl.class)
public interface Film {

</code></pre><br/><p>Veuillez mettre à jour le code de <strong>User</strong> : </p><pre><code class="language-java" metastring="{3}">import com.fasterxml.jackson.databind.annotation.JsonDeserialize;

@JsonDeserialize(as = UserImpl.class)
public interface User {
</code></pre><br/><p>Veuillez exécuter l&#x27;application et vous assurer que tout est en ordre.</p><br/><h2>a.4) L&#x27;injection de dépendances</h2><p>Afin d&#x27;injecter des dépendances au sein d&#x27;une application implémentant Jakarta EE,
« Jakarta Dependency Injection » (ou Jakarta DI) permet d&#x27;obtenir des objets tout
en maximisant la réutilisation, la testabilité et la maintenabilité en comparaison
avec des approches plus traditionnelles (utilisation de constructeurs…).</p><p>Pour pouvoir utiliser les API d&#x27;injection de dépendances au sein de Jersey,
voici la librairie qui est contenue dans l&#x27;achetype Maven utilisé (voir fichier <strong>pom.xml</strong>) :</p><pre><code class="language-xml">&lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><br/><p>Les services principaux de CDI (Contexts &amp; Dependency Injection) sont :</p><ul><li>Mise à disposition de contextes afin de lier le cycle de vie et les interactions de composants
ayant un état avec des contextes bien définis ;</li><li>L&#x27;injection de dépendance afin d&#x27;injecter des composants dans un application et choisir à
l&#x27;exécution l&#x27;implémentation particulière d&#x27;une interface (= le service) à injecter.</li></ul><br/><p>Pour injecter un objet au sein d&#x27;une classe, il faut :</p><ul><li>Configurer votre application JAX-RS pour indiquer comment l&#x27;injection de dépendance doit créer vos instances ; on peut le faire via <strong>bind(service).to(contrat)</strong> et le chaîner avec <strong>.in( scope)</strong>. Les scopes disponibles sont :<ul><li><strong>PerLookup</strong> : pour chaque appel du service une instance du contrat est créée.</li><li><strong>RequestScoped</strong> : une instance créé pour chaque requête.</li><li><strong>Singleton</strong> : une seule instance du contrat créé par service.</li></ul></li><li>Faire le binding via la redéfinition d&#x27;un <strong>AbstractBinder</strong>. Nous allons lier le contrat de
<strong>DomainFactory</strong> au service <strong>DomainFactoryImpl</strong> pour que une et une seul instance soit créée
et puisse être injectée dans l&#x27;application là où nécessaire.
Pour ce faire, veuillez créer la classe <strong>ApplicationBinder</strong> au sein du package <strong>utils</strong> :</li></ul><pre><code class="language-java">package be.vinci.utils;

import be.vinci.domain.DomainFactory;
import be.vinci.domain.DomainFactoryImpl;
import org.glassfish.hk2.utilities.binding.AbstractBinder;


import jakarta.inject.Singleton;
import jakarta.ws.rs.ext.Provider;

@Provider
public class ApplicationBinder extends AbstractBinder {

    @Override
    protected void configure() {
        bind(DomainFactoryImpl.class).to(DomainFactory.class).in(Singleton.class);
    }
}
</code></pre><ul><li>Dans <strong>Main</strong>, il faut configurer l&#x27;application pour qu&#x27;elle utilise le nouveau Provider (<strong>ApplicationBinder</strong>).
Veuillez mettre à jour <strong>ResourceConfig</strong> :</li></ul><pre><code class="language-java" metastring="{2}">final ResourceConfig rc = new ResourceConfig().packages(&quot;be.vinci.api&quot;)
        .register(ApplicationBinder.class);
</code></pre><ul><li>Pour rappel, l&#x27;annotation <strong>@Provider</strong> ci-dessus permet de fournir notre propre implémentation
d&#x27;un provider, de la rendre disponible à l&#x27;exécution, à notre application JAX-RS.</li><li>Nous allons maitenant injecter la factory via l&#x27;annotation <strong>@Inject</strong>, qui sera injectée
sous forme de <strong>Singleton</strong> (une et une seule instance) conformément à sa configuration
au sein de l&#x27;<strong>AbstractBinder</strong>. Veuillez mettre à jour le code de <strong>UserDataService</strong> :</li></ul><pre><code class="language-java" metastring="{3,9}">public class UserDataService {
    //...
    @Inject
    private DomainFactory myDomainFactory;
    //...    
</code></pre><br/><p>Veuillez exécuter l&#x27;application et vous assurer que tout est en ordre.</p><br/><p>Pour l&#x27;injection de dépendance au sein de Jakarta, une bonne documentation n&#x27;est pas évidente
à trouver. Les notions données ci-dessus devraient être suffisantes pour avancer. </p><br/><p>Les services de données sont aussi des dépendances qui peuvent être utilisées à différents
endroit dans votre code. Nous allons donc utiliser le framework afin d&#x27;injecter ces dépendances.</p><br/><p>Dans un premier temps, veuillez extraire l&#x27;interface de <strong>FilmDataService</strong> comme expliqué
précédemment et renommer la classe en <strong>FilmDataServiceImpl</strong>.</p><p>Veuillez aussi extraire l&#x27;interface de <strong>UserDataService</strong> et renommer la classe
en <strong>UserDataServiceImpl</strong>.</p><p>Veuillez mettre à jour <strong>ApplicationBinder</strong> afin d&#x27;indiquer les implémentations à utiliser ainsi
que le scope des instances :</p><pre><code class="language-java" metastring="{7-8}">@Provider
public class ApplicationBinder extends AbstractBinder {

    @Override
    protected void configure() {
        bind(DomainFactoryImpl.class).to(DomainFactory.class).in(Singleton.class);
        bind(FilmDataServiceImpl.class).to(FilmDataService.class).in(Singleton.class);
        bind(UserDataServiceImpl.class).to(UserDataService.class).in(Singleton.class);
    }
}
</code></pre><br/><p>Il reste maintenant à injecter les instances de nos services de données là où nécessaire, au
sein de nos Root Resources et de nos filtres (package <strong>api</strong>).</p><p>Modifiez <strong>FilmResource</strong> :</p><pre><code class="language-java" metastring="{4-5}">@Singleton
@Path(&quot;films&quot;)
public class FilmResource {
    @Inject
    private FilmDataService myFilmDataService;
</code></pre><br/><p>Modifiez <strong>AuthsResource</strong> :</p><pre><code class="language-java" metastring="{4-5}">@Singleton
@Path(&quot;/auths&quot;)
public class AuthsResource {
    @Inject
    private UserDataService myUserDataService;
</code></pre><br/><p>Modifiez <strong>AuthorizationRequestFilter</strong> :</p><pre><code class="language-java" metastring="{7-8}">@Singleton
@Provider
@Authorize
public class AuthorizationRequestFilter implements ContainerRequestFilter {
    private final Algorithm jwtAlgorithm = Algorithm.HMAC256(Config.getProperty(&quot;JWTSecret&quot;));
    private final JWTVerifier jwtVerifier = JWT.require(this.jwtAlgorithm).withIssuer(&quot;auth0&quot;).build();
    @Inject
    private UserDataService myUserDataService ;
</code></pre><br/><p>Voila, le refactoring du code est terminé. </p><p>Veuillez exécuter l&#x27;application et vous assurer que tout est en ordre.</p><br/><p>Voici quelques références si vous souhaitiez approfondir le sujet de CDI :</p><ul><li>Basique Injection de dépendances via Jersey&#x27;s HK2 : <a href="https://riptutorial.com/jersey/example/23632/basic-dependency-injection-using-jersey-s-hk2">https://riptutorial.com/jersey/example/23632/basic-dependency-injection-using-jersey-s-hk2</a> </li><li>L&#x27;API pour l&#x27;injection de dépendance de Jakarta fournit quelques infos intéressantes : <a href="https://jakarta.ee/specifications/cdi/4.0/apidocs/">https://jakarta.ee/specifications/cdi/4.0/apidocs/</a></li><li>La spécification pour l&#x27;injection de dépendance : <a href="https://jakarta.ee/specifications/cdi/4.0/jakarta-cdi-spec-4.0">https://jakarta.ee/specifications/cdi/4.0/jakarta-cdi-spec-4.0</a></li></ul><br/><h1><a id="sectionB"></a>b) Mapping d&#x27;exceptions à des réponses</h1><h2>b.1) Introduction</h2><p>Dans le module 1 nous avons vu comment renvoyer des codes et des messages d&#x27;erreur
à l&#x27;aide de <strong>WebApplicationException</strong>.</p><br/><p>Il est possible aussi, au sein d&#x27;une application JAX-RS, de mapper directement
une Java Exception à une réponse http d&#x27;erreur.</p><p>Ceci est décrit dans le manuel utilisateur de Jersey : <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/representations.html#d0e6279">https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/representations.html#d0e6279</a></p><p>En résumé, il suffit :</p><ul><li>soit de définir une exception spécifique qui étend <strong>WebApplicationException</strong> ; </li><li>soit d&#x27;utiliser un provider personnalisé pour mapper une exception à une réponse ;
dans ce cas, le provider doit implémenter l&#x27;interface <strong><code>ExceptionMapper&lt;E extends Throwable&gt;</code></strong>. </li></ul><br/><h2>b.2) Exceptions héritant de WebApplicationException</h2><p>Il est possible de créer ses propres classes d&#x27;exceptions où l&#x27;exception prend directement
en charge une réponse HTTP d&#x27;erreur au client.</p><p>Dans le package <strong>api.filters</strong>, veuillez créer la classe <strong>TokenDecodingException</strong> :</p><pre><code class="language-java">package be.vinci.api.filters;

import jakarta.ws.rs.WebApplicationException;
import jakarta.ws.rs.core.Response;

public class TokenDecodingException extends WebApplicationException {
    public TokenDecodingException() {
        super(Response.status(Response.Status.UNAUTHORIZED)
                .build());
    }

    public TokenDecodingException(String message) {
        super(Response.status(Response.Status.UNAUTHORIZED)
                .entity(message)
                .type(&quot;text/plain&quot;)
                .build());
    }

    public TokenDecodingException(Throwable cause) {
        super(Response.status(Response.Status.UNAUTHORIZED)
                .entity(cause.getMessage())
                .type(&quot;text/plain&quot;)
                .build());
    }
}
</code></pre><br/><p>Au sein de <strong>AuthorizationRequestFilter</strong>, modifiez le code pour appeler
la nouvelle exception :</p><pre><code class="language-java" metastring="{12}">@Override
public void filter(ContainerRequestContext requestContext) throws IOException {
    String token = requestContext.getHeaderString(&quot;Authorization&quot;);
    if (token == null) {
        requestContext.abortWith(Response.status(Response.Status.UNAUTHORIZED)
                .entity(&quot;A token is needed to access this resource&quot;).build());
    } else {
        DecodedJWT decodedToken = null;
        try {
            decodedToken = this.jwtVerifier.verify(token);
        } catch (Exception e) {
            throw new TokenDecodingException(e);
        }
</code></pre><br/><p>Ajoutez une nouvelle requête permettant de tester cette nouvelle exception au sein de
<strong>films.http</strong> :</p><pre><code class="language-http-request" metastring="{4}">### Test the TokenDecoding Exception
POST {{baseUrl}}/films
Content-Type: application/json
Authorization: {{jamesToken}}modifiedtoken

{
  &quot;title&quot;: &quot;Venom: Let There Be Carnage&quot;,
  &quot;duration&quot;: 9,
  &quot;budget&quot;: 110,
  &quot;link&quot;: &quot;https://en.wikipedia.org/wiki/Venom:_Let_There_Be_Carnage&quot;
}
</code></pre><br/><h2>b.3) Mapping d&#x27;exceptions à des réponses</h2><p>Le rôle des Root Resources est notamment de préparer des réponses aux clients. Il est donc OK
de lancer des <strong>WebApplicationException</strong> à ce niveau là.</p><br/><p>Pour les exceptions lancées dans d&#x27;autres parties du code, comme par exemple dans
les services de données,  il est intéressant que les exceptions qui amènent à une
réponse au client soient traitées de manière centralisée plutôt que de gérer des
<strong>try</strong> / <strong>catch</strong> un peu partout.</p><br/><p>On peut aussi souhaiter centraliser certains traitement pour toutes les exceptions lancées,
y-compris les <strong>WebApplicationException</strong> lancées dans les Root Resources.</p><p>La centralisation de ces traitements d&#x27;exception peut se faire au sein d&#x27;un <strong>ExceptionMapper</strong>.
C&#x27;est un lieu idéal pour traiter de tous les codes et messages d&#x27;erreur à envoyer aux client,
pour créer des logs...</p><br/><p>Nous allons créer une <strong>ExceptionMapper</strong> nommé <strong>WebExceptionMapper</strong> dans le package <strong>utils</strong>
qui doit attraper toutes les exceptions, afficher la stack trace, puis envoyer une réponse
au client. Si de l&#x27;exception est de type <strong>WebApplicationException</strong>, on souhaite envoyer une réponse contenant le <strong>status</strong>
et <strong>message</strong> de celle-ci. Sinon on renvoie le code d&#x27;erreur <strong>INTERNAL_SERVER_ERROR</strong> et
le message associé à l&#x27;exception  :</p><pre><code class="language-java">package be.vinci.utils;

import jakarta.ws.rs.WebApplicationException;
import jakarta.ws.rs.core.Response;
import jakarta.ws.rs.ext.ExceptionMapper;
import jakarta.ws.rs.ext.Provider;

@Provider
public class WebExceptionMapper implements ExceptionMapper&lt;Throwable&gt; {
    @Override
    public Response toResponse(Throwable exception) {
        exception.printStackTrace();
        if (exception instanceof WebApplicationException)
            return ((WebApplicationException) exception).getResponse(); // the response is already prepared
        return  Response.status( Response.Status.INTERNAL_SERVER_ERROR)
                .entity(exception.getMessage())
                .build();
    }
}
</code></pre><br/><p>Dans <strong>Main</strong>, il faut configurer l&#x27;application pour qu&#x27;elle utilise le nouveau Provider (<strong>WebExceptionMapper</strong>).
Veuillez mettre à jour <strong>ResourceConfig</strong> :</p><pre><code class="language-java" metastring="{3}">final ResourceConfig rc = new ResourceConfig().packages(&quot;be.vinci.api&quot;)
        .register(ApplicationBinder.class)
        .register(WebExceptionMapper.class);
</code></pre><br/><p>Il y a un problème au niveau de Jersey. Si l&#x27;exception de type <strong>WebApplicationException</strong>
contient une réponse, les ExceptionMappers ne seront pas appelés : <a href="https://stackoverflow.com/questions/46339265/how-to-catch-webapplicationexception-with-jax-rs">https://stackoverflow.com/questions/46339265/how-to-catch-webapplicationexception-with-jax-rs</a></p><p>Dès lors, nous devons mettre à jour le code des <strong>WebApplicationException</strong> lancées afin de faire appel
au constructeur prenant le code d&#x27;erreur en 1er paramètre, puis le message d&#x27;erreur en deuxième
paramètre. Mettez à jour le code des classes <strong>AuthsResource</strong>, <strong>FilmResource</strong> et <strong>TokenDecodingException</strong>.</p><p>Voici un exemple de mise à jour pour <strong>AuthsResource</strong> :</p><pre><code class="language-java" metastring="numbered {14,21,33,41}">@Singleton
@Path(&quot;/auths&quot;)
public class AuthsResource {
    @Inject
    private UserDataService myUserDataService;

    @POST
    @Path(&quot;login&quot;)
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public ObjectNode login(JsonNode json) {
        // Get and check credentials
        if (!json.hasNonNull(&quot;login&quot;) || !json.hasNonNull(&quot;password&quot;)) {
            throw new WebApplicationException(&quot;login or password required&quot;, Response.Status.BAD_REQUEST);
        }
        String login = json.get(&quot;login&quot;).asText();
        String password = json.get(&quot;password&quot;).asText();
        // Try to login
        ObjectNode publicUser = myUserDataService.login(login, password);
        if (publicUser == null) {
            throw new WebApplicationException(&quot;Login or password incorrect&quot;, Response.Status.UNAUTHORIZED);
        }
        return publicUser;
    }

    @POST
    @Path(&quot;register&quot;)
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public ObjectNode register(JsonNode json) {
        // Get and check credentials
        if (!json.hasNonNull(&quot;login&quot;) || !json.hasNonNull(&quot;password&quot;)) {
            throw new WebApplicationException(&quot;login or password required&quot;, Response.Status.BAD_REQUEST);
        }
        String login = json.get(&quot;login&quot;).asText();
        String password = json.get(&quot;password&quot;).asText();

        // Try to login
        ObjectNode publicUser = myUserDataService.register(login, password);
        if (publicUser == null) {
            throw new WebApplicationException(&quot;this resource already exists&quot;, Response.Status.CONFLICT);
        }
        return publicUser;

    }

}
</code></pre><br/><p>Veuillez exécuter l&#x27;application et vous assurer que tout est en ordre.</p><br/><h1><a id="sectionC"></a>c) Sérialisation de POJOs et filtrage d&#x27;attributs</h1><h2>c.1) Introduction</h2><p>Il existe pas mal de situation où l&#x27;on souhaiterait renvoyer qu&#x27;un subset des attributs
d&#x27;un POJO (ou d&#x27;une liste de POJOs). </p><p>Imaginez par exemple que l&#x27;on souhaite lire la liste de tous les utilisateurs.</p><br/><p>Veuillez ajouter la classe <strong>UserResource</strong> au sein du package <strong>api</strong> :</p><pre><code class="language-java">package be.vinci.api;

import be.vinci.api.filters.Authorize;
import be.vinci.domain.User;
import be.vinci.services.UserDataService;
import jakarta.inject.Inject;
import jakarta.inject.Singleton;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

import java.util.List;

@Singleton
@Path(&quot;/users&quot;)
public class UserResource {

    @Inject
    private UserDataService myUserDataService;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Authorize
    public List&lt;User&gt; getAll() {
        return myUserDataService.getAll();
    }

}
</code></pre><br/><p>Nous allons tester l&#x27;opération de lecture des utilisateurs qui est protégée par un token.</p><p>Ajoutez le script <strong>user.http</strong> à votre projet ou module IntelliJ :</p><pre><code class="language-http-requests">### Login the default user
POST {{baseUrl}}/auths/login
Content-Type: application/json

{
&quot;login&quot;:&quot;james&quot;,
&quot;password&quot;:&quot;password&quot;
}

&gt; {%
client.global.set(&quot;jamesToken&quot;, response.body.token);
%}

### Read All users
GET {{baseUrl}}/users
Authorization: {{jamesToken}}
</code></pre><br/><p>Si vous utilisez VS Code, convertissez ce script en créant une request variable pour récupérer
le token.</p><br/><p>Veuillez exécutez l&#x27;API de gestion de films et lancer les requêtes du script <strong>user.http</strong>.</p><p>On remarque que toutes les informations des utilisateurs, y-compris le password, sont renvoyées
au client.
Dans ce cas-ci, il est important de filtrer l&#x27;attribut password de la représentation JSON qui sera
renvoyée au client.</p><br/><p>Il existe plusieurs mécanismes pour filtrer des attributs lors d&#x27;opérations de
sérialisation vers du JSON ou de désérialisation à partir de JSON.</p><br/><h2>c.2) Filtrer des attributs de la représentation JSON d&#x27;un POJO : les vues JSON</h2><p>Un des mécanismes de filtrage d&#x27;attributs qui a été sélectionné pour ce cours est la
création de vues JSON au sein d&#x27;un POJO.</p><br/><p>Ce mécanisme est réellement utile dans les cas où l&#x27;on doit filtrer différemment les attributs
d&#x27;un même POJO en fonction de l&#x27;opération de sérialisation.</p><p>Par exemple, si vous devez sérialiser des données lors d&#x27;une réponse à un client, vous
ne souhaitez pas sérialiser le <strong>password</strong> d&#x27;un <strong>User</strong>.
Par contre, lorsque vous sérialiser des données au sein d&#x27;un fichier JSON, pour enregistrer
les données d&#x27;un nouvel <strong>User</strong>, là vous souhaitez sérialiser le <strong>password</strong>.</p><br/><p>Pour ce faire, nous allons créer deux vues JSON que nous pourrons associer au POJO <strong>User</strong> implémenté
par <strong>UserImpl</strong> : </p><ul><li>une vue publique qui contient tous les attributs qui peuvent être lus par les clients de
l&#x27;API (l&#x27;id et le login dans le cadre d&#x27;un <strong>User</strong>) ;</li><li>une vue interne qui contient tous les attributs qui peuvent être écrits par l&#x27;API suite
aux opérations de création et de mise à jour d&#x27;une ressource
(l&#x27;id, le login et le password dans le cadre d&#x27;un <strong>User</strong>).</li></ul><br/><p>Veuillez créer le package <strong>view</strong> et y ajouter la class <strong>Views</strong> : </p><pre><code class="language-java">package be.vinci.views;

public class Views {
    public static class Public {
    }

    public static class Internal extends Public {
    }

}
</code></pre><br/><p>Cette classe <strong>Views</strong> va nous permettre d&#x27;annoter des vues JSON grâce aux deux classes
imbriquées vides.</p><br/><p>Attention à ce que la vue qui doit reprendre tous les attributs étende la vue plus restreinte.</p><br/><p>Ensuite, nous pouvons annotez nos vues JSON au sein du POJO <strong>UserImpl</strong>
via l&#x27;annotation <strong>@JsonView</strong> :</p><pre><code class="language-java" metastring="{1,3,5,7}">@JsonInclude(JsonInclude.Include.NON_NULL) // ignore all null fields in order to avoid sending props not linked to a JSON view
class UserImpl implements User {
    @JsonView(Views.Public.class)
    private int id;
    @JsonView(Views.Public.class)
    private String login;
    @JsonView(Views.Internal.class)
    private String password;

    @Override
    public String getLogin() {
        return login;
    }
    //.....
</code></pre><br/><p>L&#x27;annotation <strong>@JsonInclude(JsonInclude.Include.NON_NULL)</strong> est très importante :
elle indique que seulement les attributs non nuls seront inclus dans la sérialisation.</p><br/><p>Pour filtrer seulement la vue publique d&#x27;une POJO lors de la sérialisation,
voici ce qui doit encore être fait.
On va renvoyer un POJO, ou une liste de POJOs dont tous les champs qui ne font pas partie
de la vue publique sont initialisés à la valeur par défaut (<strong>null</strong> pour les objets). </p><br/><p>Puis, au sein d&#x27;une Root Resource (<strong>UserResource</strong>) on renverra ce POJO, ou liste de POJOs,
et la sérialisation sera fait automatiquement
vers du JSON, en ignorant les champs nuls (car, pour rappel, nous avons indiqué
<strong>@JsonInclude(JsonInclude.Include.NON_NULL)</strong> au sein de <strong>UserImpl</strong>).</p><br/><p>Veuillez ajouter deux méthodes au sein de la classe <strong>Json</strong> permettant de filtrer
une vue publique :</p><pre><code class="language-java">public &lt;T&gt; List&lt;T&gt; filterPublicJsonViewAsList(List&lt;T&gt; list) {
    try {
        JavaType type = jsonMapper.getTypeFactory().constructCollectionType(List.class, this.type);
        // serialize using JSON Views : public view (all fields not required in the
        // views are not serialized)
        String publicItemListAsString = jsonMapper.writerWithView(Views.Public.class).writeValueAsString(list);
        // deserialize using JSON Views : Public View (all fields that are not serialized
        // are set to their default values in the POJOs)
        return jsonMapper.readerWithView(Views.Public.class).forType(type).readValue(publicItemListAsString);
    } catch (JsonProcessingException e) {
        e.printStackTrace();
        return null;
    }

}

public &lt;T&gt; T filterPublicJsonView(T item) {
    try {
        // serialize using JSON Views : public view (all fields not required in the
        // views are not serialized)
        String publicItemAsString = jsonMapper.writerWithView(Views.Public.class).writeValueAsString(item);
        // deserialize using JSON Views : Public View (all fields that are not serialized
        // are set to their default values in the POJO)
        return jsonMapper.readerWithView(Views.Public.class).forType(type).readValue(publicItemAsString);
    } catch (JsonProcessingException e) {
        e.printStackTrace();
        return null;
    }

}
</code></pre><br/><p>Il nous reste à filtrer la liste de POJOs renvoyée par la méthode <strong>getAll</strong> de <strong>UserDataServiceImpl</strong>.
Veuillez mettre à jour la méthode <strong>getAll</strong> :</p><pre><code class="language-java" metastring="{4}">@Override
public List&lt;User&gt; getAll() {
    var items = jsonDB.parse(COLLECTION_NAME);
    return jsonDB.filterPublicJsonViewAsList(items);
}
</code></pre><br/><p>La méthode <strong>filterPublicJsonViewAsList</strong> va mettre les valeurs par défaut
pour tous les champs non publics (ici juste le password) d&#x27;un <strong>User</strong> et
renvoyer une liste de <strong>User</strong>.</p><p>Ensuite, la méthode <strong>getAll</strong> de <strong>UserResource</strong> va renvoyer cette liste de <strong>User</strong> : </p><pre><code class="language-java" metastring="{4}">@GET
@Produces(MediaType.APPLICATION_JSON)
@Authorize
public List&lt;User&gt; getAll() {
    System.out.println(&quot;getAll&quot;);
    return myUserDataService.getAll();
}
</code></pre><br/><p>Le framework, via Jackson, va automatiquement convertir cette liste de <strong>User</strong> dont le password
est à null (valeur par défaut d&#x27;une <strong>String</strong>) en JSON, sans sérialiser le champs <strong>password</strong>
car nous avons annoté (<strong>@JsonInclude(JsonInclude.Include.NON_NULL)</strong>) <strong>UserImpl</strong>
pour spécifier que seulement les attributs non nuls seront inclus dans la sérialisation.</p><br/><p>Veuillez exécutez l&#x27;API de gestion de films et lancer les requêtes du script <strong>user.http</strong>.</p><p>Vous remarquerez que le champs <strong>password</strong> a bien été filtré !</p><br/><p><strong>Attention</strong> : cette méthode de filtrage peut causer des soucis si vous devez filtrer
des attributs de type primitif : <strong>int</strong>, <strong>double</strong>, <strong>boolean</strong>...
La valeur par défaut de ces attributs, n&#x27;est pas <strong>null</strong>. Dès lors, ces attributs
ne pourront pas être filtrés et seront sérialisés même si vous les annoter de
<strong>@JsonView(Views.Internal.class)</strong>.</p><br/><p>Pour visualiser cela, nous allons tester l&#x27;ajout d&#x27;un <strong>User</strong> avec deux nouvelles propriétés.
Veuillez mettre à jour <strong>UserImpl</strong>:</p><pre><code class="language-java" metastring="{1,9-12}">@JsonInclude(JsonInclude.Include.NON_NULL) // ignore all null fields in order to avoid sending props not linked to a JSON view
class UserImpl implements User {class UserImpl implements User {
   @JsonView(Views.Public.class)
   private int id;
   @JsonView(Views.Public.class)
   private String login;
   @JsonView(Views.Internal.class)
   private String password;
   @JsonView(Views.Internal.class)
   private int age;
   @JsonView(Views.Internal.class)
   private boolean married ;    

   @Override
   public int getAge() {
       return age;
   }

   @Override
   public void setAge(int age) {
       this.age = age;
   }

   @Override
   public boolean isMarried() {
       return married;
   }

   @Override
   public void setMarried(boolean married) {
       this.married = married;
   }
   //.....
</code></pre><br/><p>Veuillez aussi mettre à jour <strong>User</strong> en ajoutant ce code :</p><pre><code class="language-java" metastring="{3-9}">@JsonDeserialize(as = UserImpl.class)
public interface User {
    int getAge();

    void setAge(int age);

    boolean isMarried();

    void setMarried(boolean married);
</code></pre><br/><p>Veuillez mettre à jour la méthode <strong>register</strong> de <strong>AuthsResource</strong> (on va récupérer un <strong>User</strong> plutôt qu&#x27;un <strong>JsonNode</strong>):</p><pre><code class="language-java" metastring="{5,7-8,12}">@POST
@Path(&quot;register&quot;)
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public ObjectNode register(User user) {
    // Get and check credentials
    if (user == null || user.getPassword() == null || user.getPassword().isBlank()
    || user.getLogin() == null || user.getLogin().isBlank()) {
        throw new WebApplicationException(&quot;login or password required&quot;, Response.Status.BAD_REQUEST);
    }
    // Try to login
    ObjectNode publicUser = myUserDataService.register(user);
    if (publicUser == null) {
        throw new WebApplicationException(&quot;this resource already exists&quot;, Response.Status.CONFLICT);
    }
    return publicUser;

}
</code></pre><br/><p>Veuillez mettre à jour la méthode <strong>register</strong> de <strong>UserDataServiceImpl</strong> (réception d&#x27;un <strong>User</strong> plutôt que d&#x27;un <strong>login</strong> et d&#x27;un <strong>password</strong>.) :</p><pre><code class="language-java" metastring="{1-2}"> @Override
public ObjectNode register(User user) {        
    if (getOne(user.getLogin()) != null) // the user already exists !
        return null;        
    
    user.setPassword(user.hashPassword(user.getPassword()));

    user = createOne(user); // add an id to the user and serialize it in db.json
</code></pre><br/><p>Veuillez aussi mettre à jour l&#x27;interface <strong>UserDataService</strong> (paramètre de type <strong>User</strong> plutôt que un <strong>login</strong> et un <strong>password</strong> sous forme de <strong>String</strong>):</p><pre><code class="language-java" metastring="{1}">ObjectNode register(User user);
</code></pre><br/><p>Veuillez ajouter ces nouvelles requêtes HTTP dans votre fichier <strong>users.http</strong> :</p><pre><code class="language-http-requests" metastring="{1}">### Register twig
POST {{baseUrl}}/auths/register
Content-Type: application/json

{
  &quot;login&quot;:&quot;twig&quot;,
  &quot;password&quot;:&quot;twig&quot;,
  &quot;age&quot;: 25,
  &quot;married&quot;: true
}

### Login twig
POST {{baseUrl}}/auths/login
Content-Type: application/json

{
  &quot;login&quot;:&quot;twig&quot;,
  &quot;password&quot;:&quot;twig&quot;
}

&gt; {%
client.global.set(&quot;twigToken&quot;, response.body.token);
%}

### Read All users
GET {{baseUrl}}/users
Authorization: {{twigToken}}
</code></pre><br/><p>Veuillez exécuter ces 3 requêtes dans l&#x27;ordre.
On voit que la dernière requête nous renvoie tant <strong>age</strong> que <strong>married</strong> alors qu&#x27;on souhaite
les filtrer. De plus, les valeurs renvoyées sont les valeurs par défaut des attributs, même si
on avait initialisés ceux-ci.</p><br/><p>Pour résoudre cela, dans un premier temps, nous allons filtrer lors de la sérialisation
tous les attributs qui ont une valeur par défaut.</p><p>Pour visualiser cela, veuillez mettre à jour <strong>UserImpl</strong>:</p><pre><code class="language-java" metastring="{1}">@JsonInclude(JsonInclude.Include.NON_DEFAULT) // ignore all default fields in order to avoid sending props not linked to a JSON view
class UserImpl implements User {class UserImpl implements User {
   @JsonView(Views.Public.class)    
   //.....
</code></pre><br/><p>Veuillez exécuter la dernière requêtes HTTP de votre fichier <strong>users.http</strong> :</p><pre><code class="language-http-requests">### Read All users
GET {{baseUrl}}/users
Authorization: {{twigToken}}
</code></pre><p>La limitation de cette solution, c&#x27;est que vous ne pouvez pas sérialiser les valeurs par défaut.</p><p>Cela peut être acceptable si vous ne devez jamais sérialiser des <strong>0</strong> pour des nombres,
par contre, ça ne l&#x27;est pas si vous devez sérialiser des <strong>boolean</strong> : si la valeur est
<strong>false</strong> pour un attribut : il sera d&#x27;office filtré (valeur par défaut d&#x27;un boolean)
même si ça n&#x27;est pas ce que l&#x27;on veut.
N&#x27;hésitez pas à visualiser ce scénario si cela vous intéresse : il suffit d&#x27;appliquer la vue <strong>Public</strong>
à l&#x27;attribut <strong>married</strong> de <strong>UserImpl</strong> et de réexécuter la dernière requête HTTP
de <strong>users.http</strong>.</p><br/><p>Pour résoudre cette dernière partie, nous pouvons utiliser les &quot;<strong>Wrappers</strong>&quot;
des types primitifs : <strong>Integer</strong>, <strong>Boolean</strong>.</p><br/><p>Veuillez convertir <strong>age</strong> en <strong>Integer</strong> et <strong>married</strong> en <strong>Boolean</strong> au sein de <strong>UserImpl</strong>.
Pour ce faire via IntelliJ : clic droit sur le type d&#x27;un attribut, <strong>Refactor</strong>,
<strong>Type Migration...</strong>, indiquez le nouveau type (<strong>Integer</strong> ou <strong>Boolean</strong>) puis clic sur
<strong>Refactor</strong></p><br/><p>Une fois cela réalisé, exécutez votre API.</p><p>Vous verrez que les attributs filtrés ne sont plus sérialisés lors de la réponse faite
aux requêtes clients. De plus, les attributs non
initialisés (dont la valeur vaut &quot;null&quot;) ne sont pas sérialisés au sein de <strong>db.json</strong>
(la méthode <strong>valueToTree</strong> dans <strong>Json</strong> ne crée pas de propriété JSON pour les attributs
qui sont &quot;null&quot;).</p><br/><h2>c.3) Filtrer des attributs de la représentation JSON d&#x27;un POJO : spécifier l&#x27;accès à une propriété</h2><p>Un autre mécanisme de filtrage d&#x27;attributs est la spécification de comment les attributs peuvent
être accédés pendant la sérialisation (&quot;<strong>read</strong>&quot; du point de vue la propriété du POJO)
et la désérialisation (&quot;<strong>write</strong>&quot;&quot;).</p><p>Il est plus simple à mettre en place que le mécanisme précédent.</p><br/><p>Ce mécanisme est applicable que dans les cas où toutes les opérations de sérialisation d&#x27;un même POJO doivent filtrer les mêmes atttributs. Par exemple, si vous devez sérialiser des données que lors de l&#x27;envoi des données aux clients, et que vous souhaitez toujours filtrer les mêmes données, alors ce mécanisme vous est recommandé.</p><br/><p>C&#x27;est éventuellement le cas lorsque l&#x27;on utilise une base de données pour faire persister les données.<br/>
<!-- -->Comme on ne doit pas sérialiser les données pour les enregistrer dans un fichier JSON, on doit juste filtrer les données lorsqu&#x27;elles sont renvoyées au format JSON pour répondre aux requêtes clientes.</p><br/><p>Voici au sein de <strong>UserImpl</strong> un exemple de comment filtrer l&#x27;attribut <strong>password</strong>
pour toutes les opérations de sérialisation d&#x27;un <strong>User</strong> :</p><pre><code class="language-java" metastring="{1}">class UserImpl implements User {
    private int id;
    private String login;
    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)
    private String password;
    private Integer age;
    private Boolean married ;  
    //.....
</code></pre><br/><p>Le simple ajout de l&#x27;annotation <strong>@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)</strong> permet
de ne jamais sérialiser le <strong>password</strong>. Par contre, il sera possible de désérialiser du JSON
(contenant une propriété <strong>password</strong>) pour créer un objet <strong>User</strong>.</p><br/><p>Les différentes spécifications d&#x27;accès aux propriétés lors de la sérialisation sont définis ici :
<a href="https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/latest/index.html">https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/latest/index.html</a></p><br/><p><strong>Code du tutoriel</strong> : si vous souhaitez directement accéder au code de la fin du tutoriel de
création d&#x27;une API de gestion de films pour ce module 3 :
<a href="https://github.com/e-vinci/baja-demos/tree/main/films-api-tutorial3">https://github.com/e-vinci/baja-demos/tree/main/films-api-tutorial3</a></p><br/><h1><a id="sectionD"></a>d) Excercice 3.1</h1><p>Nous souhaitons continuer le développement du Headless CMS démarré au module 2. </p><p>Veuillez faire un refactoring du code de l&#x27;exercice 2.1 selon les concepts vus dans
ce module 3 : abstraction de l&#x27;implémentation de classes par l&#x27;utilisation d&#x27;interfaces,
ajout de factory et injection de dépendances.</p><br/><p>Veuillez centraliser la gestion des exceptions au sein d&#x27;un <strong>ExceptionMapper</strong> pour notamment
envoyer chaque message d&#x27;exception associé à une requête dans le corps de la réponse.</p><br/>Veuillez relancer les tests des méthodes offertes par votre application JAX-RS à l&#x27;aide d&#x27;un client léger (HTTP client d&#x27;IntelliJ ou Rest Client de VS Code) pour vous assurer que votre refactoring est OK.<br/><br/><p>Est-ce que vous avez des blocs <strong>try/catch</strong> dans <strong>PageResource</strong> ?</p><p>Si oui, faites-en sorte de les supprimer, tout en continuant de renvoyer un message d&#x27;erreur
au clients si nécessaire.</p><br/><p>Quelques tips :</p><ul><li>Continuez le projet développé dans le cadre de l&#x27;Exercice 2.1 du module 2. Il n&#x27;est pas nécessaire
de créer un nouveau projet.</li><li>Reprenez <strong>WebExceptionMapper</strong>, vu dans le tutoriel de ce module 3, au sein de votre projet.</li></ul><br/><h1><a id="sectionE"></a>e) 🍬 Excercice 3.2 optionnel</h1><p>Nous souhaitons continuer le développement du Headless CMS démarré au module 2.
Pour ce faire, nous allons créer la RESTful API qui s&#x27;occupera de gérer les contenus
de type « News ».</p><br/><p>Une <strong>News</strong> aura un id, un titre, une courte description, un contenu, un auteur,
un statut de publication, une date et heure de création
(par défaut la date système au moment de la création de l&#x27;instance),
une date et heure ultime de péremption (un mois plus tard que la date de création par défaut),
une page associée (null par défaut) ainsi qu&#x27;une position dans la page associée.
Le statut de publication d&#x27;une news peut actuellement prendre comme valeur :</p><ul><li>« hidden »</li><li>« published »</li></ul><br/><p>Seul un utilisateur authentifié pourra créer des news.
La modification d&#x27;une news, tout comme la suppression d&#x27;une news ne pourra se faire que
par son auteur.</p><br/><p>Est-ce qu&#x27;un auteur d&#x27;une news pourra associer une page à sa news qui est d&#x27;un autre auteur ?
Pour cet exercice, oui, l&#x27;association vers une page pourra se faire indépendamment de
l&#x27;auteur de la page.</p><p>La lecture d&#x27;une news, ou de toutes les news, pourra être réalisée par n&#x27;importe quel utilisateur
anonyme ou authentifié pour les news dont le statut vaut « published ».
Pour les news dont le statut vaut « hidden », seul leur auteur authentifié pourra les lire.</p><br/><p>On souhaite aussi rendre possible la lecture de toutes les news associées à une page ;
pour ce faire la requête devra indiquer la page pour laquelle on souhaite obtenir
les news associées. </p><p>Tous les news dont le statut vaut « published » pourront être lues par n&#x27;importe
quel utilisateur (anonyme ou authentifié). </p><p>Pour les news dont le statut vaut « hidden », seul leur auteur authentifié pourra les lire.</p><br/><p>Veuillez développer une application JAX-RS mettant à disposition les opérations
décrites ci-dessus, en suivant les bonnes pratiques données dans ce module : abstraction
de l&#x27;implémentation, création de « Factory », injection de dépendances pour vos services…</p><br/><p>Dans un premier temps, veuillez formaliser les opérations associées à vos RESTful APIs
sous forme d&#x27;un tableau dans un fichier <strong>README.md</strong>.
Votre tableau devrait reprendre les conventions REST présentées au module 2<br/>
<!-- -->(<a href="/baja/modules/2#sectionC">c) Rappel de conventions sur les RESTful APIs, authentification &amp; autorisation</a>).</p><br/>Lors de l&#x27;implémentation de vos RESTful APIs, veuillez tester toutes les méthodes offertes par votre application JAX-RS à l&#x27;aide d&#x27;un client léger (HTTP client d&#x27;IntelliJ ou Rest Client de VS Code).<br/><br/><p>Quelques tips :</p><ul><li>Continuez le projet développé dans le cadre de l&#x27;Exercice 3.1. Il n&#x27;est pas nécessaire
de créer un nouveau projet.</li><li>Pour la sérialisation de dates, nous vous conseillons ce lien : <a href="https://www.baeldung.com/jackson-serialize-dates">https://www.baeldung.com/jackson-serialize-dates</a>.
Le plus simple est d&#x27;utiliser des instances de <strong>Date</strong> en les annotant via
<strong>@JsonFormat</strong> si vous souhaitez avoir une date formatée sous forme de String plutôt
qu&#x27;un nombre long.</li><li>Pour des valeurs par défaut de POJOs, n&#x27;hésitez pas à utiliser le constructeur sans paramètre :<ul><li>La date de création correspond à la date à l&#x27;instant de la création de l&#x27;instance.</li><li>La date de péremption peut être automatiquement mise à un mois après la date de
création en utilisant un objet de <strong>Calendar</strong> pour la conversion d&#x27;une date.</li></ul></li></ul><br/><p><strong>🍬 Challenges optionnels</strong> : </p><ul><li>Nous vous proposons d&#x27;utiliser les vues JSON afin de ne jamais écrire
dans <strong>db.json</strong> toutes les infos liées à la page associée à une news. On souhaiterait juste
enregistrer l&#x27;id et le titre de la page.</li><li>De plus, lorsque que des infos associées à une news sont renvoyées à un client,
on ne souhaite pas renvoyer toutes les infos de la page associée à la news.
Dans ce cas-ci, on enregistra et renverra que ces deux propriétés d&#x27;une page associée à une news :
<strong>id</strong> et <strong>title</strong>.<br/></li></ul></div></main><footer class="footer "><div class="background footer__background"><div class="footer__logo"><h3 class="footer__logo__text">Backend Java</h3><div class="footer__logo__image"></div><div class="footer__logo__image2"></div></div><div class="footer__icons"><ul class="menu"><li><a href="mailto: raphael.baroni@vinci.be" data-email="raphael.baroni@vinci.be" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></li></ul></div></div></footer><div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/modules/3/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-506270a00a3559d88775.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-510fdaa458a9d8e9affa.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5428f57e2de053a196b3.js"],"component---src-pages-about-js":["/component---src-pages-about-js-4a647fe4cbb953fd2688.js"],"component---src-templates-mdx-pages-js":["/component---src-templates-mdx-pages-js-3ceb1fe9d635f65ff425.js"]};/*]]>*/</script><script src="/baja/component---src-templates-mdx-pages-js-3ceb1fe9d635f65ff425.js" async=""></script><script src="/baja/0816e0feb973c1d40069d6902f99c49c22995b76-bedc1d1846d5a3c8be55.js" async=""></script><script src="/baja/a9a7754c-8d57bce12b88a78cd7d6.js" async=""></script><script src="/baja/app-506270a00a3559d88775.js" async=""></script><script src="/baja/cb1608f2-054445c79c06534b5035.js" async=""></script><script src="/baja/framework-c7047573e5c239accf9e.js" async=""></script><script src="/baja/webpack-runtime-1a988f899203af32e814.js" async=""></script></body></html>